(function(){"use strict";var e={483:function(e,t,a){var s=a(5471),o=a(7432),i=a(8505),n=a(4119),r=a(586),l=a(1689),c=a(8834),m=a(1526),d=a(5474),u=a(8230),p=a(9456),v=a(7954),h=a(8412),g=a(946),f=function(){var e=this,t=e._self._c;return t(i.A,[t(n.A,{attrs:{app:"",color:e.appTheme.primary,dark:"",elevation:"2",height:"64"}},[t(d.A,{staticClass:"py-0 px-2 px-sm-6"},[t(h.A,{attrs:{align:"center"}},[t("div",{staticClass:"logo-container"},[t("img",{staticClass:"tt-logo",attrs:{src:"/assets/logo.svg",alt:"TBTK Logo"}})]),t("div",{staticClass:"d-none d-sm-block"},[t("h1",{staticClass:"app-title"},[e._v("Bedriftsbordtennis Trondheim")])]),t("div",{staticClass:"d-block d-sm-none"},[t("h1",{staticClass:"app-title-small"},[e._v("Bedriftsbordtennis")])])])],1)],1),t(v.A,{class:{"gradient-background":!e.userIsAuthenticated}},[!e.userIsAuthenticated&&e.config.authentication.required?[t(d.A,{attrs:{"fill-height":"",fluid:""}},[t(h.A,{attrs:{align:"center",justify:"center"}},[t(m.A,{attrs:{cols:"12",sm:"8",md:"6",lg:"4",xl:"3"}},[t(l.A,{staticClass:"auth-card",attrs:{rounded:"lg",elevation:"8"}},[t(u.A,{staticClass:"px-8 px-sm-10",on:{submit:function(t){return t.preventDefault(),e.doLogin.apply(null,arguments)}}},[t(c.OQ,{staticClass:"py-8",attrs:{align:"center"}},[t("h1",{staticClass:"text-h4 mb-6 font-weight-medium"},[e._v("Sign In")]),t(g.A,{staticClass:"mb-4",attrs:{label:"Username","prepend-inner-icon":"mdi-account",outlined:"",dense:"","hide-details":"auto",color:e.appTheme.accent},model:{value:e.userName,callback:function(t){e.userName=t},expression:"userName"}}),t(g.A,{staticClass:"mb-2",attrs:{label:"Password",type:"password","prepend-inner-icon":"mdi-lock",outlined:"",dense:"","hide-details":"auto",color:e.appTheme.accent},model:{value:e.userPass,callback:function(t){e.userPass=t},expression:"userPass"}}),e.showInvalidUser?t(o.A,{staticClass:"mt-4 mb-1 text-left",attrs:{dense:"",outlined:"",type:"error"}},[t(h.A,{attrs:{align:"center","no-gutters":""}},[t("span",[e._v("Invalid username or password.")])])],1):e._e(),t(h.A,{staticClass:"mt-6",attrs:{align:"center",justify:"center"}},[t(m.A,{staticClass:"pa-2",attrs:{cols:"auto"}},[t(r.A,{staticClass:"px-6",attrs:{type:"submit",color:e.appTheme.primary,dark:"",depressed:"","min-width":"110"},on:{click:e.doLogin}},[t(p.A,{attrs:{left:""}},[e._v("mdi-login")]),e._v(" Sign In ")],1)],1),e.config.authentication.allowGuestLogin?t(m.A,{staticClass:"pa-2",attrs:{cols:"auto"}},[t(r.A,{staticClass:"px-6",attrs:{color:e.appTheme.accent,dark:"",depressed:"","min-width":"110"},on:{click:e.doLoginAsAGuest}},[t(p.A,{attrs:{left:""}},[e._v("mdi-account-outline")]),e._v(" Guest ")],1)],1):e._e()],1)],1)],1)],1)],1)],1)],1)]:[t(d.A,{staticClass:"py-4 px-4 px-sm-6"},[t("router-view")],1)]],2)],1)},y=[],_=JSON.parse('{"authentication":{"required":false,"defaultUsers":[{"username":"admin","password":"ryan2023","role":"admin"},{"username":"guest","password":"guest2023","role":"viewer"}],"allowGuestLogin":true},"appearance":{"defaultTheme":"deepBlue","availableThemes":["deepBlue","modernDark","elegantPurple"]},"appInfo":{"name":"Bedriftsbordtennis Trondheim","version":"1.0.0","author":"Bedriftsbordtennis Trondheim"}}'),w={name:"App",components:{},data:()=>({config:_,themes:{deepBlue:{primary:"#ADD8E6",accent:"#3a7ca5",highlight:"#4e9eca"},modernDark:{primary:"#2c3e50",accent:"#16a085",highlight:"#2ecc71"},elegantPurple:{primary:"#2e294e",accent:"#7b5e7b",highlight:"#d499b9"}},selectedTheme:"",userName:"",userPass:"",userIsAuthenticated:!_.authentication.required,showInvalidUser:!1}),created(){this.selectedTheme=_.appearance.defaultTheme},computed:{appTheme(){return this.themes[this.selectedTheme]}},methods:{doLogin(){const e=this.config.authentication.defaultUsers.find((e=>e.username===this.userName&&e.password===this.userPass));e?(this.userIsAuthenticated=!0,this.showInvalidUser=!1):this.showInvalidUser=!0},doLoginAsAGuest(){if(this.config.authentication.allowGuestLogin){const e=this.config.authentication.defaultUsers.find((e=>"viewer"===e.role));e&&(this.userName=e.username,this.userPass=e.password,this.userIsAuthenticated=!0,this.showInvalidUser=!1)}},logOut(){this.config.authentication.required&&(this.userIsAuthenticated=!1,this.userName="",this.userPass="",this.showInvalidUser=!1)}}},b=w,C=a(1656),T=(0,C.A)(b,f,y,!1,null,null,null),M=T.exports,P=a(792);s.Ay.use(P.A);var S=new P.A({}),D=a(173),A=function(){var e=this,t=e._self._c;return t("div",{staticClass:"table-tennis-view"},[t("div",{staticClass:"tt-header"},[t("nav",{staticClass:"tt-nav"},[t("div",{staticClass:"mobile-menu-toggle"},[t("button",{staticClass:"menu-button",on:{click:function(t){e.isMobileMenuOpen=!e.isMobileMenuOpen}}},[t("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}},[t("line",{attrs:{x1:"3",y1:"12",x2:"21",y2:"12"}}),t("line",{attrs:{x1:"3",y1:"6",x2:"21",y2:"6"}}),t("line",{attrs:{x1:"3",y1:"18",x2:"21",y2:"18"}})])])]),e.isMobileMenuOpen?t("div",{staticClass:"mobile-menu"},[t("div",{staticClass:"mobile-menu-header"},[t("h3",[e._v("Menu")]),t("button",{staticClass:"close-button",on:{click:function(t){e.isMobileMenuOpen=!1}}},[e._v(" × ")])]),t("div",{staticClass:"mobile-menu-content"},[e._l(e.generalTabs,(function(a){return t("button",{directives:[{name:"show",rawName:"v-show",value:e.isTabVisible(a),expression:"isTabVisible(tab)"}],key:a.id,class:["mobile-nav-btn",{active:e.activeTab===a.id}],on:{click:function(t){return e.setTabAndCloseMobileMenu(a.id)}}},[e._v(" "+e._s(a.name)+" ")])})),e._l(e.adminTabs,(function(a){return t("button",{key:a.id,class:["mobile-nav-btn admin-btn",{active:e.activeTab===a.id}],on:{click:function(t){return e.setTabAndCloseMobileMenu(a.id)}}},[e._v(" "+e._s(a.name)+" ")])})),t("div",{staticClass:"mobile-menu-divider"}),e.hasQualificationTabs||e.hasDivisionTabs?t("div",[t("div",{staticClass:"mobile-menu-section"},[e._v("Phase-specific")]),e.hasQualificationTabs?t("div",e._l(e.qualificationTabs,(function(a){return t("button",{directives:[{name:"show",rawName:"v-show",value:e.isTabVisible(a),expression:"isTabVisible(tab)"}],key:a.id,class:["mobile-nav-btn",{active:e.activeTab===a.id}],on:{click:function(t){return e.setTabAndCloseMobileMenu(a.id)}}},[e._v(" "+e._s(a.name)+" ")])})),0):e._e(),e.hasDivisionTabs?t("div",e._l(e.divisionTabs,(function(a){return t("button",{directives:[{name:"show",rawName:"v-show",value:e.isTabVisible(a),expression:"isTabVisible(tab)"}],key:a.id,class:["mobile-nav-btn",{active:e.activeTab===a.id}],on:{click:function(t){return e.setTabAndCloseMobileMenu(a.id)}}},[e._v(" "+e._s(a.name)+" ")])})),0):e._e()]):e._e()],2)]):e._e(),t("div",{staticClass:"phase-tabs"},[t("button",{class:["phase-tab",{active:"qualification"===e.tournamentPhase}],on:{click:function(t){return e.setPhaseAndTab("qualification")}}},[e._v(" Qualification Phase ")]),t("button",{class:["phase-tab",{active:"division"===e.tournamentPhase}],on:{click:function(t){return e.setPhaseAndTab("division")}}},[e._v(" Division Phase ")]),t("div",{staticClass:"secondary-tabs"},[e._l(e.generalTabs,(function(a){return t("button",{directives:[{name:"show",rawName:"v-show",value:e.isTabVisible(a),expression:"isTabVisible(tab)"}],key:a.id,class:["secondary-tab",{active:e.activeTab===a.id}],on:{click:function(t){e.activeTab=a.id}}},[e._v(" "+e._s(a.name)+" ")])})),e._l(e.adminTabs,(function(a){return t("button",{key:a.id,class:["secondary-tab admin-btn",{active:e.activeTab===a.id}],on:{click:function(t){e.activeTab=a.id}}},[e._v(" "+e._s(a.name)+" ")])}))],2)]),t("div",{staticClass:"phase-specific-tabs"},["qualification"===e.tournamentPhase?t("div",{staticClass:"phase-specific-content"},e._l(e.qualificationTabs,(function(a){return t("button",{directives:[{name:"show",rawName:"v-show",value:e.isTabVisible(a),expression:"isTabVisible(tab)"}],key:a.id,class:["phase-specific-tab",{active:e.activeTab===a.id}],on:{click:function(t){e.activeTab=a.id}}},[e._v(" "+e._s(a.name)+" ")])})),0):e._e(),"division"===e.tournamentPhase?t("div",{staticClass:"phase-specific-content"},e._l(e.divisionTabs,(function(a){return t("button",{directives:[{name:"show",rawName:"v-show",value:e.isTabVisible(a),expression:"isTabVisible(tab)"}],key:a.id,class:["phase-specific-tab",{active:e.activeTab===a.id}],on:{click:function(t){e.activeTab=a.id}}},[e._v(" "+e._s(a.name)+" ")])})),0):e._e()])])]),t("div",{staticClass:"tt-content"},["teams"===e.activeTab?t("TeamManagement",{attrs:{isAdmin:e.isAdmin,registrationMode:!1}}):e._e(),"seeding"===e.activeTab?t("TeamSeeding",{attrs:{isAdmin:e.isAdmin}}):e._e(),"qualification_groups"===e.activeTab?t("GroupManagement",{attrs:{isAdmin:e.isAdmin,groupType:"qualification"}}):e._e(),"qualification_matches"===e.activeTab?t("UpcomingMatches",{attrs:{isAdmin:e.isAdmin,phase:"qualification"}}):e._e(),"qualification_results"===e.activeTab?t("MatchResults",{attrs:{isAdmin:e.isAdmin,phase:"qualification"}}):e._e(),"qualification_standings"===e.activeTab?t("PublicStandings",{attrs:{isAdmin:e.isAdmin,phase:"qualification"}}):e._e(),"division_groups"===e.activeTab?t("GroupManagement",{attrs:{isAdmin:e.isAdmin,groupType:"division"}}):e._e(),"division_matches"===e.activeTab?t("UpcomingMatches",{attrs:{isAdmin:e.isAdmin,phase:"division"}}):e._e(),"division_results"===e.activeTab?t("MatchResults",{attrs:{isAdmin:e.isAdmin,phase:"division"}}):e._e(),"division_standings"===e.activeTab?t("PublicStandings",{attrs:{isAdmin:e.isAdmin,phase:"division"}}):e._e(),"admin"===e.activeTab?t("div",{staticClass:"admin-container"},[t("AdminPanel",{on:{login:function(t){e.isAdmin=!0},logout:function(t){e.isAdmin=!1},"phase-updated":e.loadTournamentPhase}})],1):e._e()],1)])},I=[],N=a(1884),x=a(223),k=a(5667),$=a(7922);const G={apiKey:"AIzaSyBqOXvQWHY4ZAA57HNyvlQHZVppqLMFUwc",authDomain:"table-tennis-2047b.firebaseapp.com",projectId:"table-tennis-2047b",storageBucket:"table-tennis-2047b.firebasestorage.app",messagingSenderId:"282103291994",appId:"1:282103291994:web:e6121ce6f3ea9e5614f863",measurementId:"G-DBS4QKS9GF"},E=(0,x.Wp)(G),R=(0,N.aU)(E),q=(0,k.xI)(E);(0,$.P5)(E);var O=function(){var e=this,t=e._self._c;return t("div",{staticClass:"team-management"},[e.registrationMode?t("div",{staticClass:"registration-intro"},[t("p",[e._v(" Welcome to the team registration for Bedriftsbordtennis Trondheim! Please fill out the form below to register your team for the tournament. ")]),e._m(0)]):e._e(),!e.registrationMode||e.isAdmin?t("div",{staticClass:"teams-section"},[t("div",{staticClass:"section-header"},[t("h3",[e._v(e._s(e.registrationMode?"Registered Teams":"Teams"))]),e.isAdmin?t("button",{staticClass:"btn add-btn",on:{click:function(t){e.showAddTeamModal=!0}}},[e._v(" "+e._s(e.registrationMode?"Register New Team":"Add Team")+" ")]):e._e()]),e.loading?t("div",{staticClass:"loading"},[e._v("Loading teams...")]):e.error?t("div",{staticClass:"error"},[e._v(" "+e._s(e.error)+" ")]):t("div",[t("div",{staticClass:"filter-section"},[t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"company-filter"}},[e._v("Filter by Company:")]),t("select",{directives:[{name:"model",rawName:"v-model",value:e.companyFilter,expression:"companyFilter"}],attrs:{id:"company-filter"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.companyFilter=t.target.multiple?a:a[0]}}},[t("option",{attrs:{value:""}},[e._v("All Companies")]),e._l(e.uniqueCompanies,(function(a){return t("option",{key:a,domProps:{value:a}},[e._v(" "+e._s(a)+" ")])}))],2)]),t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"search-team"}},[e._v("Search:")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.searchQuery,expression:"searchQuery"}],attrs:{type:"text",id:"search-team",placeholder:"Search teams..."},domProps:{value:e.searchQuery},on:{input:function(t){t.target.composing||(e.searchQuery=t.target.value)}}})])]),t("div",{staticClass:"teams-table-container"},[t("table",{staticClass:"teams-table"},[t("thead",[t("tr",[t("th",{staticClass:"row-num-col"},[e._v("#")]),t("th",[e._v("Team Name")]),t("th",[e._v("Company")]),t("th",[e._v("Members")]),e.isAdmin?t("th",{staticClass:"action-column"},[e._v("Actions")]):e._e()])]),t("tbody",e._l(e.filteredTeams,(function(a,s){return t("tr",{key:a.id,staticClass:"team-row"},[t("td",{staticClass:"row-num-cell"},[e._v(e._s(s+1))]),t("td",{staticClass:"team-name-cell"},[t("div",{staticClass:"team-name"},[e._v(e._s(a.name))])]),t("td",[e._v(e._s(a.company||"-"))]),t("td",[t("div",{staticClass:"members-list"},[a.members&&a.members.length?t("div",e._l(a.members,(function(s,o){return t("div",{key:o,class:{"captain-member":a.contactInfo&&a.contactInfo.name===e.getFullName(s)}},[t("span",{staticClass:"member-name"},[e._v(e._s(o+1)+". "+e._s(e.getFullName(s)))]),a.contactInfo&&a.contactInfo.name===e.getFullName(s)?t("span",{staticClass:"captain-indicator"},[e._v("✉️")]):e._e()])})),0):t("span",[e._v("-")])])]),e.isAdmin?t("td",{staticClass:"action-cell"},[t("div",{staticClass:"team-actions"},[t("button",{staticClass:"btn edit-btn",on:{click:function(t){return e.editTeam(a)}}},[e._v(" Edit ")]),t("button",{staticClass:"btn delete-btn",on:{click:function(t){return e.confirmDeleteTeam(a)}}},[e._v(" Delete ")])])]):e._e()])})),0),t("tfoot",[t("tr",{staticClass:"total-row"},[t("td",{staticClass:"total-row-label",attrs:{colspan:"3"}},[e._v("Total Members")]),t("td",{staticClass:"total-members-sum"},[e._v(" "+e._s(e.getTotalMembersCount)+" ")]),e.isAdmin?t("td"):e._e()])])]),0===e.filteredTeams.length?t("div",{staticClass:"no-data"},[e._v(" No teams found matching the current filters. ")]):e._e()])])]):e._e(),e.registrationMode&&!e.isAdmin?t("div",{staticClass:"registration-form-container"},[t("div",{staticClass:"registration-form"},[t("h3",[e._v("Register Your Team")]),t("div",{staticClass:"form-group"},[e._m(1),t("input",{directives:[{name:"model",rawName:"v-model",value:e.registration.name,expression:"registration.name"}],attrs:{type:"text",id:"reg-team-name",placeholder:"Enter team name",required:""},domProps:{value:e.registration.name},on:{input:function(t){t.target.composing||e.$set(e.registration,"name",t.target.value)}}})]),t("div",{staticClass:"form-group"},[e._m(2),t("div",{staticClass:"company-select-container"},[e.isNewCompanyReg?e._e():t("select",{directives:[{name:"model",rawName:"v-model",value:e.registration.company,expression:"registration.company"}],staticClass:"company-select",attrs:{id:"reg-company",required:""},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.registration,"company",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:""}},[e._v("-- Select Company --")]),e._l(e.uniqueCompanies,(function(a){return t("option",{key:a,domProps:{value:a}},[e._v(" "+e._s(a)+" ")])})),t("option",{attrs:{value:"__add_new__"}},[e._v("+ Add New Company")])],2),e.isNewCompanyReg?t("input",{directives:[{name:"model",rawName:"v-model",value:e.registration.company,expression:"registration.company"}],staticClass:"company-input",attrs:{type:"text",placeholder:"Enter new company name",required:""},domProps:{value:e.registration.company},on:{input:function(t){t.target.composing||e.$set(e.registration,"company",t.target.value)}}}):e._e(),e.isNewCompanyReg?t("button",{staticClass:"btn cancel-new-btn",on:{click:e.cancelAddCompanyReg}},[e._v(" Cancel ")]):e._e()])]),t("h4",[e._v("Team Members")]),t("p",{staticClass:"helper-text"},[e._v(" Please add all players who will participate in the tournament ")]),t("div",{staticClass:"members-container"},e._l(e.registration.members,(function(a,s){return t("div",{key:s,staticClass:"member-row"},[t("div",{staticClass:"member-name-inputs"},[t("input",{directives:[{name:"model",rawName:"v-model",value:a.firstName,expression:"member.firstName"}],staticClass:"member-input first-name",attrs:{type:"text",placeholder:"First name"},domProps:{value:a.firstName},on:{input:[function(t){t.target.composing||e.$set(a,"firstName",t.target.value)},function(t){return e.autoAddRegistrationMember(s)}]}}),t("input",{directives:[{name:"model",rawName:"v-model",value:a.lastName,expression:"member.lastName"}],staticClass:"member-input last-name",attrs:{type:"text",placeholder:"Last name"},domProps:{value:a.lastName},on:{input:function(t){t.target.composing||e.$set(a,"lastName",t.target.value)}}})]),e.registration.members.length>1&&s<e.registration.members.length-1?t("button",{staticClass:"btn remove-btn",on:{click:function(t){return e.removeRegistrationMember(s)}}},[e._v(" Remove ")]):e._e()])})),0),t("h4",[e._v("Contact Information")]),t("div",{staticClass:"form-group"},[e._m(3),t("select",{directives:[{name:"model",rawName:"v-model",value:e.registration.contactInfo.memberId,expression:"registration.contactInfo.memberId"}],staticClass:"captain-select",attrs:{id:"reg-contact-name",required:""},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.registration.contactInfo,"memberId",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:""}},[e._v("-- Select Team Captain --")]),e._l(e.registration.members.filter((e=>e.firstName.trim())),(function(a,s){return t("option",{key:s,domProps:{value:s}},[e._v(" "+e._s(e.getFullName(a))+" ")])}))],2)]),t("div",{staticClass:"form-row"},[t("div",{staticClass:"form-group"},[e._m(4),t("input",{directives:[{name:"model",rawName:"v-model",value:e.registration.contactInfo.email,expression:"registration.contactInfo.email"}],attrs:{type:"email",id:"reg-contact-email",placeholder:"Contact email",required:""},domProps:{value:e.registration.contactInfo.email},on:{input:function(t){t.target.composing||e.$set(e.registration.contactInfo,"email",t.target.value)}}})]),t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"reg-contact-phone"}},[e._v("Phone Number:")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.registration.contactInfo.phone,expression:"registration.contactInfo.phone"}],attrs:{type:"tel",id:"reg-contact-phone",placeholder:"Contact phone number"},domProps:{value:e.registration.contactInfo.phone},on:{input:function(t){t.target.composing||e.$set(e.registration.contactInfo,"phone",t.target.value)}}})])]),t("h4",[e._v("Team Preferences")]),t("div",{staticClass:"form-row"},[t("div",{staticClass:"form-group"},[e._m(5),t("select",{directives:[{name:"model",rawName:"v-model",value:e.registration.preferredDay,expression:"registration.preferredDay"}],attrs:{id:"reg-preferred-day",required:""},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.registration,"preferredDay",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:""}},[e._v("-- Select day --")]),t("option",{attrs:{value:"Monday"}},[e._v("Monday")]),t("option",{attrs:{value:"Wednesday"}},[e._v("Wednesday")]),t("option",{attrs:{value:"Both"}},[e._v("Both days work")]),t("option",{attrs:{value:"Monday Only"}},[e._v("Monday Only")]),t("option",{attrs:{value:"Wednesday Only"}},[e._v("Wednesday Only")])])]),t("div",{staticClass:"form-group"},[e._m(6),t("select",{directives:[{name:"model",rawName:"v-model",value:e.registration.preferredTime,expression:"registration.preferredTime"}],attrs:{id:"reg-preferred-time",required:""},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.registration,"preferredTime",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:""}},[e._v("-- Select time --")]),t("option",{attrs:{value:"20:00"}},[e._v("20:00")]),t("option",{attrs:{value:"21:00"}},[e._v("21:00")])])])]),t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"reg-comments"}},[e._v("Additional Comments:")]),t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.registration.comments,expression:"registration.comments"}],attrs:{id:"reg-comments",placeholder:"Any additional information or special requests",rows:"3"},domProps:{value:e.registration.comments},on:{input:function(t){t.target.composing||e.$set(e.registration,"comments",t.target.value)}}})]),t("div",{staticClass:"form-actions"},[t("button",{staticClass:"btn register-btn",attrs:{disabled:e.isSubmitting},on:{click:e.submitRegistration}},[e._v(" "+e._s(e.isSubmitting?"Submitting...":"Submit Registration")+" ")]),t("button",{staticClass:"btn clear-btn",on:{click:e.clearRegistration}},[e._v(" Clear Form ")])]),e.registrationMessage?t("div",{staticClass:"registration-message",class:e.registrationStatus},[e._v(" "+e._s(e.registrationMessage)+" ")]):e._e()])]):e._e(),e.showAddTeamModal||e.showEditTeamModal?t("div",{staticClass:"modal-overlay"},[t("div",{staticClass:"modal-content"},[t("div",{staticClass:"modal-header"},[t("h3",[e._v(e._s(e.showEditTeamModal?"Edit Team":"Add New Team"))]),t("button",{staticClass:"close-btn",on:{click:e.closeModal}},[e._v("×")])]),t("div",{staticClass:"modal-body"},[t("div",{staticClass:"form-group"},[e._m(7),t("input",{directives:[{name:"model",rawName:"v-model",value:e.editingTeam.name,expression:"editingTeam.name"}],attrs:{type:"text",id:"team-name",placeholder:"Enter team name",required:""},domProps:{value:e.editingTeam.name},on:{input:function(t){t.target.composing||e.$set(e.editingTeam,"name",t.target.value)}}})]),t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"team-company"}},[e._v("Company/Organization:")]),t("div",{staticClass:"company-select-container"},[e.isNewCompany?e._e():t("select",{directives:[{name:"model",rawName:"v-model",value:e.editingTeam.company,expression:"editingTeam.company"}],staticClass:"company-select",attrs:{id:"team-company"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.editingTeam,"company",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:""}},[e._v("-- Select Company --")]),e._l(e.uniqueCompanies,(function(a){return t("option",{key:a,domProps:{value:a}},[e._v(" "+e._s(a)+" ")])})),t("option",{attrs:{value:"__add_new__"}},[e._v("+ Add New Company")])],2),e.isNewCompany?t("input",{directives:[{name:"model",rawName:"v-model",value:e.editingTeam.company,expression:"editingTeam.company"}],staticClass:"company-input",attrs:{type:"text",placeholder:"Enter new company name"},domProps:{value:e.editingTeam.company},on:{input:function(t){t.target.composing||e.$set(e.editingTeam,"company",t.target.value)}}}):e._e(),e.isNewCompany?t("button",{staticClass:"btn cancel-new-btn",on:{click:e.cancelAddCompany}},[e._v(" Cancel ")]):e._e()])]),t("div",{staticClass:"team-members-section"},[t("h4",[e._v("Team Members")]),t("div",{staticClass:"members-container"},e._l(e.editingTeam.members,(function(a,s){return t("div",{key:s,staticClass:"member-row"},[t("div",{staticClass:"member-name-inputs"},[t("input",{directives:[{name:"model",rawName:"v-model",value:a.firstName,expression:"member.firstName"}],staticClass:"member-input first-name",attrs:{type:"text",placeholder:"First name"},domProps:{value:a.firstName},on:{input:[function(t){t.target.composing||e.$set(a,"firstName",t.target.value)},function(t){return e.autoAddMemberField(s)}]}}),t("input",{directives:[{name:"model",rawName:"v-model",value:a.lastName,expression:"member.lastName"}],staticClass:"member-input last-name",attrs:{type:"text",placeholder:"Last name"},domProps:{value:a.lastName},on:{input:function(t){t.target.composing||e.$set(a,"lastName",t.target.value)}}})]),e.editingTeam.members.length>1&&(s<e.editingTeam.members.length-1||a.firstName.trim())?t("button",{staticClass:"btn remove-btn",on:{click:function(t){return e.removeEditingMember(s)}}},[e._v(" Remove ")]):e._e()])})),0)]),t("div",{staticClass:"contact-info"},[t("h4",[e._v("Contact Information")]),t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"contact-member"}},[e._v("Team Captain:")]),t("select",{directives:[{name:"model",rawName:"v-model",value:e.editingTeam.contactInfo.memberId,expression:"editingTeam.contactInfo.memberId"}],staticClass:"captain-select",attrs:{id:"contact-member"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.editingTeam.contactInfo,"memberId",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:""}},[e._v("-- Select Team Captain --")]),e._l(e.editingTeam.members.filter((e=>e.firstName.trim())),(function(a,s){return t("option",{key:s,domProps:{value:s}},[e._v(" "+e._s(e.getFullName(a))+" ")])}))],2)]),t("div",{staticClass:"form-row"},[t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"contact-email"}},[e._v("Email:")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.editingTeam.contactInfo.email,expression:"editingTeam.contactInfo.email"}],attrs:{type:"email",id:"contact-email",placeholder:"Contact email"},domProps:{value:e.editingTeam.contactInfo.email},on:{input:function(t){t.target.composing||e.$set(e.editingTeam.contactInfo,"email",t.target.value)}}})]),t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"contact-phone"}},[e._v("Phone Number:")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.editingTeam.contactInfo.phone,expression:"editingTeam.contactInfo.phone"}],attrs:{type:"tel",id:"contact-phone",placeholder:"Contact phone number"},domProps:{value:e.editingTeam.contactInfo.phone},on:{input:function(t){t.target.composing||e.$set(e.editingTeam.contactInfo,"phone",t.target.value)}}})])])]),t("div",{staticClass:"form-row"},[t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"team-preferred-day"}},[e._v("Preferred Match Day:")]),t("select",{directives:[{name:"model",rawName:"v-model",value:e.editingTeam.preferredDay,expression:"editingTeam.preferredDay"}],attrs:{id:"team-preferred-day"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.editingTeam,"preferredDay",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:""}},[e._v("-- Select day --")]),t("option",{attrs:{value:"Monday"}},[e._v("Monday")]),t("option",{attrs:{value:"Wednesday"}},[e._v("Wednesday")]),t("option",{attrs:{value:"Both"}},[e._v("Both days work")]),t("option",{attrs:{value:"Monday Only"}},[e._v("Monday Only")]),t("option",{attrs:{value:"Wednesday Only"}},[e._v("Wednesday Only")])])]),t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"team-preferred-time"}},[e._v("Preferred Match Time:")]),t("select",{directives:[{name:"model",rawName:"v-model",value:e.editingTeam.preferredTime,expression:"editingTeam.preferredTime"}],attrs:{id:"team-preferred-time"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.editingTeam,"preferredTime",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:""}},[e._v("-- Select time --")]),t("option",{attrs:{value:"20:00"}},[e._v("20:00")]),t("option",{attrs:{value:"21:00"}},[e._v("21:00")])])])]),t("div",{staticClass:"form-row"},[t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"team-group"}},[e._v("Qualification Group:")]),t("select",{directives:[{name:"model",rawName:"v-model",value:e.editingTeam.groupId,expression:"editingTeam.groupId"}],attrs:{id:"team-group"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.editingTeam,"groupId",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:""}},[e._v("-- Select Qualification Group --")]),e._l(e.groups,(function(a){return t("option",{key:a.id,domProps:{value:a.id}},[e._v(" "+e._s(a.name)+" ")])}))],2)]),t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"team-division"}},[e._v("Division:")]),t("select",{directives:[{name:"model",rawName:"v-model",value:e.editingTeam.divisionId,expression:"editingTeam.divisionId"}],attrs:{id:"team-division"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.editingTeam,"divisionId",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:""}},[e._v("-- Select Division --")]),e._l(e.divisions,(function(a){return t("option",{key:a.id,domProps:{value:a.id}},[e._v(" "+e._s(a.name)+" ")])}))],2)])]),t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"team-comments"}},[e._v("Additional Comments:")]),t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.editingTeam.comments,expression:"editingTeam.comments"}],attrs:{id:"team-comments",placeholder:"Any additional information or special requests",rows:"3"},domProps:{value:e.editingTeam.comments},on:{input:function(t){t.target.composing||e.$set(e.editingTeam,"comments",t.target.value)}}})])]),t("div",{staticClass:"modal-footer"},[t("button",{staticClass:"btn save-btn",on:{click:e.saveTeam}},[e._v(" "+e._s(e.showEditTeamModal?"Update Team":"Save Team")+" ")]),t("button",{staticClass:"btn cancel-btn",on:{click:e.closeModal}},[e._v("Cancel")])])])]):e._e(),e.showDeleteModal?t("div",{staticClass:"modal-overlay"},[t("div",{staticClass:"modal-content"},[t("div",{staticClass:"modal-header"},[t("h3",[e._v("Confirm Delete")]),t("button",{staticClass:"close-btn",on:{click:function(t){e.showDeleteModal=!1}}},[e._v(" × ")])]),t("div",{staticClass:"modal-body"},[t("p",[e._v(" Are you sure you want to delete team: "),t("strong",[e._v(e._s(e.teamToDelete?.name))]),e._v("? ")]),t("p",{staticClass:"warning"},[e._v(" This action cannot be undone. All related matches will remain but will be marked as involving a deleted team. ")])]),t("div",{staticClass:"modal-footer"},[t("button",{staticClass:"btn delete-btn",on:{click:e.deleteTeam}},[e._v("Delete")]),t("button",{staticClass:"btn cancel-btn",on:{click:function(t){e.showDeleteModal=!1}}},[e._v(" Cancel ")])])])]):e._e()])},F=[function(){var e=this,t=e._self._c;return t("p",[t("strong",[e._v("Registration deadline:")]),e._v(" Make sure to complete your registration before the deadline to secure your spot in the tournament. ")])},function(){var e=this,t=e._self._c;return t("label",{attrs:{for:"reg-team-name"}},[e._v("Team Name: "),t("span",{staticClass:"required"},[e._v("*")])])},function(){var e=this,t=e._self._c;return t("label",{attrs:{for:"reg-company"}},[e._v("Company/Organization: "),t("span",{staticClass:"required"},[e._v("*")])])},function(){var e=this,t=e._self._c;return t("label",{attrs:{for:"reg-contact-name"}},[e._v("Team Captain: "),t("span",{staticClass:"required"},[e._v("*")])])},function(){var e=this,t=e._self._c;return t("label",{attrs:{for:"reg-contact-email"}},[e._v("Email: "),t("span",{staticClass:"required"},[e._v("*")])])},function(){var e=this,t=e._self._c;return t("label",{attrs:{for:"reg-preferred-day"}},[e._v("Preferred Match Day: "),t("span",{staticClass:"required"},[e._v("*")])])},function(){var e=this,t=e._self._c;return t("label",{attrs:{for:"reg-preferred-time"}},[e._v("Preferred Match Time: "),t("span",{staticClass:"required"},[e._v("*")])])},function(){var e=this,t=e._self._c;return t("label",{attrs:{for:"team-name"}},[e._v("Team Name: "),t("span",{staticClass:"required"},[e._v("*")])])}],K=(a(8743),{name:"TeamManagement",props:{isAdmin:{type:Boolean,default:!1},registrationMode:{type:Boolean,default:!1}},setup(e){const t=(0,s.KR)([]),a=(0,s.KR)([]),o=(0,s.KR)([]),i=(0,s.KR)(!0),n=(0,s.KR)(null),r=(0,s.KR)(""),l=(0,s.KR)(""),c=(0,s.KR)(""),m=(0,s.KR)(!1),d=(0,s.KR)(!1),u=(0,s.KR)(!1),p=(0,s.KR)(!1),v=(0,s.KR)(!1),h=(0,s.Kh)({id:"",name:"",company:"",preferredDay:"",preferredTime:"",divisionId:"",groupId:"",members:[],contactInfo:{name:"",email:"",phone:"",memberId:""},comments:""}),g=(0,s.KR)(null),f=(0,s.Kh)({name:"",company:"",preferredDay:"",preferredTime:"",members:[],contactInfo:{name:"",email:"",phone:"",memberId:""},comments:""}),y=(0,s.KR)(!1),_=(0,s.KR)(""),w=(0,s.KR)(""),b=e=>{if(!e)return"";if(void 0!==e.name&&!e.firstName)return e.name;const t=e.firstName||"",a=e.lastName||"";return t&&a?`${t} ${a}`:t||a};(0,s.wB)((()=>h.contactInfo.memberId),(e=>{""!==e&&h.members[e]&&(h.contactInfo.name=b(h.members[e]))})),(0,s.wB)((()=>f.contactInfo.memberId),(e=>{""!==e&&f.members[e]&&(f.contactInfo.name=b(f.members[e]))})),(0,s.wB)((()=>h.company),(e=>{"__add_new__"===e&&(h.company="",m.value=!0)})),(0,s.wB)((()=>f.company),(e=>{"__add_new__"===e&&(f.company="",d.value=!0)}));const C=(0,s.EW)((()=>{let e=t.value;if(r.value&&(e=e.filter((e=>e.divisionId===r.value))),l.value&&(e=e.filter((e=>e.company===l.value))),c.value){const t=c.value.toLowerCase();e=e.filter((e=>e.name.toLowerCase().includes(t)||e.company&&e.company.toLowerCase().includes(t)||e.members&&e.members.some((e=>{const a=b(e).toLowerCase();return a.includes(t)}))))}return e})),T=(0,s.EW)((()=>{const e=t.value.map((e=>e.company)).filter((e=>e&&""!==e.trim()));return[...new Set(e)].sort()})),M=(0,s.EW)((()=>C.value.reduce(((e,t)=>e+(t.members?t.members.length:0)),0))),P=async()=>{try{i.value=!0;const e=(0,N.P)((0,N.rJ)(R,"teams"),(0,N.My)("name")),s=(0,N.P)((0,N.rJ)(R,"divisions"),(0,N.My)("order")),n=(0,N.P)((0,N.rJ)(R,"groups"),(0,N.My)("order")),[r,l,c]=await Promise.all([(0,N.GG)(e),(0,N.GG)(s),(0,N.GG)(n)]);t.value=r.docs.map((e=>({id:e.id,...e.data()}))),a.value=l.docs.map((e=>({id:e.id,...e.data()}))),o.value=c.docs.map((e=>({id:e.id,...e.data()}))),i.value=!1}catch(e){n.value="Failed to load data. Please try again.",i.value=!1,console.error(e)}},S=e=>{if(!e)return"None";const t=a.value.find((t=>t.id===e));return t?t.name:"Unknown"},D=e=>{if(!e)return"None";const t=o.value.find((t=>t.id===e));return t?t.name:"Unknown"},A=()=>{h.members.push({firstName:"",lastName:""})},I=e=>{e===h.members.length-1&&h.members[e].firstName.trim()&&A()},x=e=>{h.members.length>1&&(h.contactInfo.memberId===e.toString()?(h.contactInfo.memberId="",h.contactInfo.name=""):h.contactInfo.memberId>e&&(h.contactInfo.memberId=(parseInt(h.contactInfo.memberId)-1).toString()),h.members.splice(e,1))},k=()=>{f.members.push({firstName:"",lastName:""})},$=e=>{e===f.members.length-1&&f.members[e].firstName.trim()&&k()},G=e=>{f.members.length>1&&(f.contactInfo.memberId===e.toString()?(f.contactInfo.memberId="",f.contactInfo.name=""):f.contactInfo.memberId>e&&(f.contactInfo.memberId=(parseInt(f.contactInfo.memberId)-1).toString()),f.members.splice(e,1))},E=()=>{u.value=!1,p.value=!1,m.value=!1,q()},q=()=>{h.id="",h.name="",h.company="",h.preferredDay="",h.preferredTime="",h.divisionId="",h.groupId="",h.members=[{firstName:"",lastName:""}],h.contactInfo={name:"",email:"",phone:"",memberId:""},h.comments=""},O=()=>{m.value=!1,h.company=""},F=()=>{d.value=!1,f.company=""},K=()=>{f.name="",f.company="",f.preferredDay="",f.preferredTime="",f.members=[{firstName:"",lastName:""}],f.contactInfo={name:"",email:"",phone:"",memberId:""},f.comments="",d.value=!1,_.value=""},L=async()=>{if(h.name)try{const e=h.members.filter((e=>""!==e.firstName.trim()));if(""!==h.contactInfo.memberId){const e=h.members[h.contactInfo.memberId];e&&(h.contactInfo.name=b(e))}const t={name:h.name,company:h.company||null,preferredDay:h.preferredDay||null,preferredTime:h.preferredTime||null,divisionId:h.divisionId||null,groupId:h.groupId||null,members:e,contactInfo:{name:h.contactInfo.name||"",email:h.contactInfo.email||"",phone:h.contactInfo.phone||"",memberId:h.contactInfo.memberId||""},comments:h.comments||"",updatedAt:(0,N.O5)()};p.value?await(0,N.mZ)((0,N.H9)(R,"teams",h.id),t):(t.createdAt=(0,N.O5)(),t.played=0,t.won=0,t.lost=0,t.points=0,await(0,N.gS)((0,N.rJ)(R,"teams"),t)),E(),await P()}catch(e){alert("Error saving team. Please try again."),console.error(e)}else alert("Team name is required")},H=e=>{if(h.id=e.id,h.name=e.name,h.company=e.company||"",h.preferredDay=e.preferredDay||"",h.preferredTime=e.preferredTime||"",h.divisionId=e.divisionId||"",h.groupId=e.groupId||"",e.members&&e.members.length?h.members=e.members.map((e=>void 0===e.name||e.firstName?{firstName:e.firstName||"",lastName:e.lastName||""}:{firstName:e.name,lastName:""})):h.members=[{firstName:"",lastName:""}],e.contactInfo){if(h.contactInfo.name=e.contactInfo.name||"",h.contactInfo.email=e.contactInfo.email||"",h.contactInfo.phone=e.contactInfo.phone||"",h.contactInfo.memberId=e.contactInfo.memberId||"",!h.contactInfo.memberId&&h.contactInfo.name){const e=h.members.findIndex((e=>b(e)===h.contactInfo.name));e>=0&&(h.contactInfo.memberId=e.toString())}}else h.contactInfo={name:"",email:"",phone:"",memberId:""};h.comments=e.comments||"",p.value=!0},W=e=>{g.value=e,v.value=!0},B=async()=>{if(g.value)try{await(0,N.kd)((0,N.H9)(R,"teams",g.value.id)),v.value=!1,g.value=null,await P()}catch(e){alert("Error deleting team. Please try again."),console.error(e)}},U=async()=>{if(!f.name||!f.company||!f.preferredDay||!f.preferredTime||!f.contactInfo.memberId||!f.contactInfo.email)return _.value="Please fill in all required fields.",void(w.value="error");const e=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;if(!e.test(f.contactInfo.email))return _.value="Please enter a valid email address.",void(w.value="error");try{y.value=!0;const e=f.members.filter((e=>""!==e.firstName.trim()));if(""!==f.contactInfo.memberId){const e=f.members[f.contactInfo.memberId];e&&(f.contactInfo.name=b(e))}const t={name:f.name,company:f.company,preferredDay:f.preferredDay,preferredTime:f.preferredTime,members:e,contactInfo:{name:f.contactInfo.name||"",email:f.contactInfo.email||"",phone:f.contactInfo.phone||"",memberId:f.contactInfo.memberId||""},comments:f.comments,createdAt:(0,N.O5)(),played:0,won:0,lost:0,points:0};await(0,N.gS)((0,N.rJ)(R,"teams"),t),_.value="Team registration submitted successfully! You will receive a confirmation email.",w.value="success",K()}catch(t){_.value="Error submitting registration. Please try again.",w.value="error",console.error(t)}finally{y.value=!1}};return(0,s.sV)((()=>{P(),0===f.members.length&&f.members.push({firstName:"",lastName:""}),0===h.members.length&&h.members.push({firstName:"",lastName:""})})),{teams:t,divisions:a,groups:o,loading:i,error:n,divisionFilter:r,companyFilter:l,searchQuery:c,filteredTeams:C,uniqueCompanies:T,isNewCompany:m,isNewCompanyReg:d,showAddTeamModal:u,showEditTeamModal:p,showDeleteModal:v,editingTeam:h,teamToDelete:g,registration:f,isSubmitting:y,registrationMessage:_,registrationStatus:w,getDivisionName:S,getGroupName:D,getTotalMembersCount:M,getFullName:b,addEditingMember:A,removeEditingMember:x,autoAddMemberField:I,addRegistrationMember:k,removeRegistrationMember:G,autoAddRegistrationMember:$,saveTeam:L,editTeam:H,closeModal:E,confirmDeleteTeam:W,deleteTeam:B,submitRegistration:U,clearRegistration:K,cancelAddCompany:O,cancelAddCompanyReg:F}}}),L=K,H=(0,C.A)(L,O,F,!1,null,"27317b2a",null),W=H.exports,B=function(){var e=this,t=e._self._c;return t("div",{staticClass:"team-seeding"},[e.loading?t("div",{staticClass:"loading"},[e._v("Loading teams...")]):e.error?t("div",{staticClass:"error"},[e._v(e._s(e.error))]):t("div",[e.isAdmin?t("div",{staticClass:"admin-controls"},[t("div",{staticClass:"pot-controls"},[t("h3",[e._v("Seeding Management")]),t("div",{staticClass:"pot-config"},[t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"num-pots"}},[e._v("Number of Pots:")]),t("input",{directives:[{name:"model",rawName:"v-model.number",value:e.numPots,expression:"numPots",modifiers:{number:!0}}],attrs:{type:"number",id:"num-pots",min:"1",max:"10"},domProps:{value:e.numPots},on:{change:e.updatePots,input:function(t){t.target.composing||(e.numPots=e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}})]),t("div",{staticClass:"auto-assign"},[t(h.A,[t("button",{staticClass:"btn auto-btn",on:{click:e.autoAssignTeams}},[e._v(" Auto-Assign Teams to Pots ")]),t("button",{staticClass:"btn reset-btn",on:{click:e.resetTeamAssignment}},[e._v(" Reset Assignment ")])])],1)])])]):e._e(),e.isAdmin?t("div",{staticClass:"unassigned-teams-section"},[t("div",{staticClass:"section-header"},[t("h3",[e._v("Unassigned Teams")]),t("span",{staticClass:"team-count"},[e._v(e._s(e.unassignedTeams.length)+" teams")])]),t("div",{staticClass:"unassigned-teams-container",class:{"drop-target":e.isDropTarget("unassigned")},on:{dragover:function(t){return t.preventDefault(),e.onDragOver("unassigned")},dragleave:e.onDragLeave,drop:function(t){return e.onDrop(t,"unassigned")}}},[e._l(e.unassignedTeams,(function(a){return t("div",{key:a.id,staticClass:"team-item team-compact",class:{dragging:e.draggedTeam?.id===a.id},attrs:{draggable:e.isAdmin,title:"Drag to assign to a pot"},on:{dragstart:function(t){return e.onDragStart(t,a,"unassigned")}}},[t("span",{staticClass:"team-name-only"},[e._v(e._s(a.name))]),t("div",{staticClass:"team-tooltip"},[t("div",{staticClass:"tooltip-content"},[a.company?t("div",{staticClass:"tooltip-item"},[t("strong",[e._v("Company:")]),e._v(" "+e._s(a.company)+" ")]):e._e(),a.preferredDay?t("div",{staticClass:"tooltip-item"},[t("strong",[e._v("Preferred Day:")]),e._v(" "+e._s(a.preferredDay)+" ")]):e._e(),a.restrictedDays&&a.restrictedDays.length?t("div",{staticClass:"tooltip-item"},[t("strong",[e._v("Only Available:")]),e._v(" "+e._s(a.restrictedDays.join(", "))+" ")]):e._e(),a.members&&a.members.length?t("div",{staticClass:"tooltip-item"},[t("strong",[e._v("Members:")]),e._v(" "+e._s(a.members.map((e=>(e.firstName.trim()+" "+(e.lastName||"")).trim())).join(", "))+" ")]):e._e()])])])})),e.isAdmin&&0===e.unassignedTeams.length?t("div",{staticClass:"empty-message"},[e._v(" All teams have been assigned to pots ")]):e._e()],2)]):e._e(),t("div",{staticClass:"seeding-pots-wrapper"},[t("div",{staticClass:"seeding-pots"},e._l(e.pots,(function(a,s){return t("div",{key:`pot-${s}`,staticClass:"pot-container"},[t("div",{staticClass:"pot-header"},[t("h3",[e._v("Pot "+e._s(s+1))]),t("span",{staticClass:"team-count"},[e._v(e._s(a.teams.length)+" teams")])]),t("div",{staticClass:"pot-teams",class:{"admin-mode":e.isAdmin,"drop-target":e.isDropTarget(s)},on:{dragover:function(t){return t.preventDefault(),e.onDragOver(s)},dragleave:e.onDragLeave,drop:function(t){return e.onDrop(t,s)}}},[t("div",{staticClass:"team-list"},e._l(a.teams,(function(a){return t("div",{key:a.id,staticClass:"team-item team-compact",class:{dragging:e.draggedTeam?.id===a.id},attrs:{draggable:e.isAdmin},on:{dragstart:function(t){return e.onDragStart(t,a,s)}}},[t("span",{staticClass:"team-name-only"},[e._v(e._s(a.name))]),t("div",{staticClass:"team-tooltip"},[t("div",{staticClass:"tooltip-content"},[a.company?t("div",{staticClass:"tooltip-item"},[t("strong",[e._v("Company:")]),e._v(" "+e._s(a.company)+" ")]):e._e(),a.preferredDay?t("div",{staticClass:"tooltip-item"},[t("strong",[e._v("Preferred Day:")]),e._v(" "+e._s(a.preferredDay)+" ")]):e._e(),a.restrictedDays&&a.restrictedDays.length?t("div",{staticClass:"tooltip-item"},[t("strong",[e._v("Only Available:")]),e._v(" "+e._s(a.restrictedDays.join(", "))+" ")]):e._e(),a.members&&a.members.length?t("div",{staticClass:"tooltip-item"},[t("strong",[e._v("Members:")]),e._v(" "+e._s(a.members.map((e=>(e.firstName.trim()+" "+(e.lastName||"")).trim())).join(", "))+" ")]):e._e()])])])})),0),e.isAdmin&&0===a.teams.length?t("div",{staticClass:"empty-pot-message"},[e._v(" Drop teams here ")]):e._e()])])})),0)]),e.isAdmin?t("div",{staticClass:"draw-section"},[t("h3",[e._v("Draw Qualification Groups")]),t("p",[e._v(" Once teams are seeded into pots, you can run the draw to automatically assign teams to qualification groups. ")]),t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"num-groups"}},[e._v("Number of Qualification Groups:")]),t("input",{directives:[{name:"model",rawName:"v-model.number",value:e.numGroups,expression:"numGroups",modifiers:{number:!0}}],attrs:{type:"number",id:"num-groups",min:"1",max:"12"},domProps:{value:e.numGroups},on:{input:function(t){t.target.composing||(e.numGroups=e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}})]),t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"teams-per-group"}},[e._v("Teams per Group:")]),t("input",{directives:[{name:"model",rawName:"v-model.number",value:e.teamsPerGroup,expression:"teamsPerGroup",modifiers:{number:!0}}],attrs:{type:"number",id:"teams-per-group",min:"3",max:"8"},domProps:{value:e.teamsPerGroup},on:{input:function(t){t.target.composing||(e.teamsPerGroup=e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}}),t("p",{staticClass:"note"},[e._v(" Total Capacity: "+e._s(e.numGroups*e.teamsPerGroup)+" teams "),t("br"),e._v(" Total Teams: "+e._s(e.totalTeams)+" "),e.numGroups*e.teamsPerGroup<e.totalTeams?t("span",{staticClass:"warning"},[e._v(" (Not enough capacity!) ")]):e._e()])]),t("div",{staticClass:"restriction-controls"},[t("h4",[e._v("Draw Restrictions")]),t("div",{staticClass:"form-group"},[t("label",{staticClass:"checkbox-label"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.restrictions.avoidSameCompany,expression:"restrictions.avoidSameCompany"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.restrictions.avoidSameCompany)?e._i(e.restrictions.avoidSameCompany,null)>-1:e.restrictions.avoidSameCompany},on:{change:function(t){var a=e.restrictions.avoidSameCompany,s=t.target,o=!!s.checked;if(Array.isArray(a)){var i=null,n=e._i(a,i);s.checked?n<0&&e.$set(e.restrictions,"avoidSameCompany",a.concat([i])):n>-1&&e.$set(e.restrictions,"avoidSameCompany",a.slice(0,n).concat(a.slice(n+1)))}else e.$set(e.restrictions,"avoidSameCompany",o)}}}),e._v(" Avoid teams from same company in the same group ")])]),t("div",{staticClass:"form-group"},[t("label",{staticClass:"checkbox-label"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.restrictions.balanceMatchDays,expression:"restrictions.balanceMatchDays"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.restrictions.balanceMatchDays)?e._i(e.restrictions.balanceMatchDays,null)>-1:e.restrictions.balanceMatchDays},on:{change:function(t){var a=e.restrictions.balanceMatchDays,s=t.target,o=!!s.checked;if(Array.isArray(a)){var i=null,n=e._i(a,i);s.checked?n<0&&e.$set(e.restrictions,"balanceMatchDays",a.concat([i])):n>-1&&e.$set(e.restrictions,"balanceMatchDays",a.slice(0,n).concat(a.slice(n+1)))}else e.$set(e.restrictions,"balanceMatchDays",o)}}}),e._v(" Try to balance preferred match days within groups ")])]),t("div",{staticClass:"form-group"},[t("label",{staticClass:"checkbox-label"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.restrictions.respectRestrictedDays,expression:"restrictions.respectRestrictedDays"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.restrictions.respectRestrictedDays)?e._i(e.restrictions.respectRestrictedDays,null)>-1:e.restrictions.respectRestrictedDays},on:{change:function(t){var a=e.restrictions.respectRestrictedDays,s=t.target,o=!!s.checked;if(Array.isArray(a)){var i=null,n=e._i(a,i);s.checked?n<0&&e.$set(e.restrictions,"respectRestrictedDays",a.concat([i])):n>-1&&e.$set(e.restrictions,"respectRestrictedDays",a.slice(0,n).concat(a.slice(n+1)))}else e.$set(e.restrictions,"respectRestrictedDays",o)}}}),e._v(" Respect teams' day restrictions (if a team can only play on certain days) ")])])]),t("button",{staticClass:"btn draw-btn",attrs:{disabled:e.numGroups*e.teamsPerGroup<e.totalTeams},on:{click:e.runDraw}},[e._v(" Run Qualification Group Draw ")]),e.drawComplete?t("div",{staticClass:"draw-results"},[e._m(0),t("div",{staticClass:"draw-groups"},e._l(e.drawResults,(function(a,s){return t("div",{key:`group-${s}`,staticClass:"draw-group",class:{"drop-target":e.groupDragTarget===s},on:{dragover:function(t){return t.preventDefault(),e.onGroupDragOver(s)},dragleave:e.onGroupDragLeave,drop:function(t){return e.onGroupDrop(t,s)}}},[t("h5",[e._v("Group "+e._s(s+1))]),t("ul",e._l(a,(function(a){return t("li",{key:a.id,staticClass:"group-team-item",class:{dragging:e.groupDraggedTeam?.id===a.id},attrs:{draggable:!0},on:{dragstart:function(t){return e.onGroupDragStart(t,a,s)}}},[e._v(" "+e._s(a.name)+" "),t("div",{staticClass:"team-tooltip group-tooltip"},[t("div",{staticClass:"tooltip-content"},[t("div",{staticClass:"tooltip-item"},[t("strong",[e._v("Pot:")]),e._v(" "+e._s(a.potId+1)+" ")]),a.company?t("div",{staticClass:"tooltip-item"},[t("strong",[e._v("Company:")]),e._v(" "+e._s(a.company)+" ")]):e._e(),a.preferredDay?t("div",{staticClass:"tooltip-item"},[t("strong",[e._v("Preferred Day:")]),e._v(" "+e._s(a.preferredDay)+" ")]):e._e(),a.restrictedDays&&a.restrictedDays.length?t("div",{staticClass:"tooltip-item"},[t("strong",[e._v("Only Available:")]),e._v(" "+e._s(a.restrictedDays.join(", "))+" ")]):e._e()])])])})),0),e.getGroupConflicts(a).length>0?t("div",{staticClass:"group-conflicts"},[t("div",{staticClass:"conflict-title"},[e._v("Conflicts:")]),t("ul",{staticClass:"conflict-list"},e._l(e.getGroupConflicts(a),(function(a,s){return t("li",{key:s,staticClass:"conflict-item"},[e._v(" "+e._s(a)+" ")])})),0)]):e._e()])})),0),t("button",{staticClass:"btn redraw-btn",on:{click:e.runDraw}},[e._v("Re-Run Draw")]),t("button",{staticClass:"btn save-draw-btn",on:{click:e.saveDrawResults}},[e._v(" Save Draw Results ")])]):e._e()]):e._e()])])},U=[function(){var e=this,t=e._self._c;return t("h4",[e._v(" Draw Results "),t("span",{staticClass:"edit-hint"},[e._v("(Drag and drop to edit)")])])}],J={name:"TeamSeeding",props:{isAdmin:{type:Boolean,default:!1}},setup(e){const t=(0,s.KR)([]),a=(0,s.KR)([]),o=(0,s.KR)([]),i=(0,s.KR)(4),n=(0,s.KR)(!0),r=(0,s.KR)(null),l=(0,s.KR)(null),c=(0,s.KR)(null),m=(0,s.KR)(null),d=(0,s.KR)(null),u=(0,s.KR)(null),p=(0,s.KR)(null),v=(0,s.KR)(8),h=(0,s.KR)(5),g=(0,s.KR)([]),f=(0,s.KR)(!1),y=(0,s.Kh)({avoidSameCompany:!0,balanceMatchDays:!0,respectRestrictedDays:!0}),_=(0,s.EW)((()=>t.value.length)),w=()=>t.value.filter((e=>"unassigned"===e.potId||null===e.potId||void 0===e.potId)),b=(e,t,a)=>{l.value=t,c.value=a,e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text/plain",t.id),setTimeout((()=>{e.target.classList.add("dragging")}),0)},C=e=>{m.value=e},T=()=>{m.value=null},M=async(e,t)=>{if(e.preventDefault(),l.value&&c.value!==t){const e=l.value,i=e.potId;if(e.potId=t,"unassigned"===i){const s=a.value.findIndex((t=>t.id===e.id));-1!==s&&a.value.splice(s,1),"unassigned"!==t&&o.value[t].teams.push(e)}else if("unassigned"===t){const t=o.value[i],s=t.teams.findIndex((t=>t.id===e.id));-1!==s&&t.teams.splice(s,1),a.value.push(e)}else{const a=o.value[i],s=a.teams.findIndex((t=>t.id===e.id));-1!==s&&a.teams.splice(s,1),o.value[t].teams.push(e)}try{await(0,N.mZ)((0,N.H9)(R,"teams",e.id),{potId:"unassigned"===t?null:t})}catch(s){console.error("Error updating team pot:",s)}}l.value=null,c.value=null,m.value=null},P=e=>m.value===e,S=(e,t,a)=>{d.value=t,u.value=a,e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text/plain",t.id),setTimeout((()=>{e.target.classList.add("dragging")}),0)},D=e=>{p.value=e},A=()=>{p.value=null},I=(e,t)=>{if(e.preventDefault(),d.value&&u.value!==t){const e=d.value,a=u.value,s=g.value[a],o=s.findIndex((t=>t.id===e.id));-1!==o&&s.splice(o,1),g.value[t].push(e)}d.value=null,u.value=null,p.value=null},x=e=>{const t=[],a={};e.forEach((e=>{e.company&&(a[e.company]||(a[e.company]=[]),a[e.company].push(e.name))}));for(const o in a)a[o].length>1&&t.push(`Company conflict: ${a[o].join(", ")} (${o})`);const s=e.filter((e=>e.restrictedDays&&e.restrictedDays.length>0));if(s.length>1)for(let o=0;o<s.length;o++)for(let e=o+1;e<s.length;e++){const a=s[o],i=s[e],n=a.restrictedDays.some((e=>i.restrictedDays.includes(e)));n||t.push(`Day conflict: ${a.name} and ${i.name} have incompatible day restrictions`)}return t},k=()=>{const e=[...o.value];o.value=[];for(let t=0;t<i.value;t++){const a=e[t]?[...e[t].teams]:[];o.value.push({id:t,name:`Pot ${t+1}`,teams:a})}a.value=w()},$=async()=>{try{n.value=!0;const s=(0,N.P)((0,N.rJ)(R,"teams"),(0,N.My)("name")),o=await(0,N.GG)(s);t.value=[],o.forEach((e=>{const a=e.data();t.value.push({id:e.id,...a,potId:"unassigned",originalPotId:a.potId})}));const r=await(0,N.x7)((0,N.H9)(R,"settings","seeding"));if(r.exists()){const e=r.data();i.value=e.numPots||4,e.restrictions&&(y.avoidSameCompany=e.restrictions.avoidSameCompany||!0,y.balanceMatchDays=e.restrictions.balanceMatchDays||!0,y.respectRestrictedDays=e.restrictions.respectRestrictedDays||!0)}else e.isAdmin&&await(0,N.BN)((0,N.H9)(R,"settings","seeding"),{numPots:i.value,restrictions:y,createdAt:new Date});k(),a.value=[...t.value],n.value=!1}catch(s){r.value="Failed to load data. Please try again.",n.value=!1,console.error(s)}},G=()=>{o.value.forEach((e=>{e.teams=[]}));const e=[...t.value],s=e.sort(((e,t)=>(t.points||0)-(e.points||0))),n=Math.ceil(s.length/i.value);s.forEach(((e,t)=>{const a=Math.min(Math.floor(t/n),i.value-1);e.potId=a,o.value[a].teams.push(e)})),a.value=[],O()},E=()=>{const e=[];o.value.forEach((t=>{e.push(...t.teams),t.teams=[]})),e.push(...a.value),e.forEach((e=>{e.potId="unassigned"})),a.value=e,O()},q=async e=>{const t=null!==c.value?c.value:"unassigned"===e.potId?"unassigned":parseInt(e.potId),s=e.potId;if("unassigned"!==s){const t=o.value[s],a=t.teams.find((t=>t.id===e.id));if(a)return void console.warn("Team already exists in this pot, skipping reassignment")}if("unassigned"===t&&"unassigned"!==s){const t=a.value.findIndex((t=>t.id===e.id));-1!==t&&a.value.splice(t,1),o.value[s].teams.push(e)}else if("unassigned"!==t&&"unassigned"===s){const s=o.value[t].teams.findIndex((t=>t.id===e.id));-1!==s&&o.value[t].teams.splice(s,1),a.value.push(e)}else if("unassigned"!==t&&"unassigned"!==s&&t!==s){const a=o.value[t].teams.findIndex((t=>t.id===e.id));-1!==a&&o.value[t].teams.splice(a,1),o.value[s].teams.push(e)}try{await(0,N.mZ)((0,N.H9)(R,"teams",e.id),{potId:"unassigned"===s?null:s})}catch(i){console.error("Error updating team pot:",i)}},O=async()=>{try{const e=[];o.value.forEach((t=>{t.teams.forEach((t=>{e.push((0,N.mZ)((0,N.H9)(R,"teams",t.id),{potId:t.potId}))}))})),a.value.forEach((t=>{e.push((0,N.mZ)((0,N.H9)(R,"teams",t.id),{potId:null}))})),await Promise.all(e)}catch(e){console.error("Error saving team pot assignments:",e),alert("Error saving team pot assignments")}},F=async()=>{try{await(0,N.BN)((0,N.H9)(R,"settings","seeding"),{numPots:i.value,restrictions:y,updatedAt:new Date},{merge:!0}),alert("Seeding restrictions saved successfully!")}catch(e){console.error("Error saving seeding restrictions:",e),alert("Error saving seeding restrictions")}},K=(e,t)=>{if(!e.restrictedDays||!e.restrictedDays.length||!t.restrictedDays||!t.restrictedDays.length)return!1;const a=e.restrictedDays.some((e=>t.restrictedDays.includes(e)));return!a},L=(e,t)=>e.preferredDay&&t.preferredDay&&e.preferredDay===t.preferredDay,H=()=>{g.value=[];for(let t=0;t<v.value;t++)g.value.push([]);const e={};for(let t=0;t<o.value.length;t++)e[t]=[...o.value[t].teams];for(let t=0;t<o.value.length;t++){const a=e[t];if(!a||0===a.length)continue;const s=B([...a]);for(const e of s){const a=Math.floor(Math.random()*v.value);let s=-1,o=1/0;for(let i=0;i<v.value;i++){const n=(a+i)%v.value,r=g.value[n];if(r.some((e=>e.potId===t))||r.length>=h.value)continue;let l=0;if(y.avoidSameCompany)for(const t of r)t.company&&e.company&&t.company===e.company&&(l+=100);if(y.respectRestrictedDays)for(const t of r)K(t,e)&&(l+=200);if(y.balanceMatchDays&&e.preferredDay)for(const t of r)L(t,e)&&(l+=10);if(l<o&&(o=l,s=n,0===l))break}if(-1!==s)g.value[s].push(e);else{let t=0;for(let e=1;e<g.value.length;e++)g.value[e].length<g.value[t].length&&(t=e);g.value[t].length<h.value&&g.value[t].push(e)}}}f.value=!0},W=async()=>{try{const e=(0,N.P)((0,N.rJ)(R,"groups"),(0,N._M)("type","==","qualification")),t=await(0,N.GG)(e);if(!t.empty){const e=confirm(`Warning: ${t.size} existing qualification groups found. Creating new groups will delete all existing qualification groups and reset team assignments. Are you sure you want to continue?`);if(!e)return;const a=[];t.forEach((e=>{a.push((0,N.kd)((0,N.H9)(R,"groups",e.id)))})),await Promise.all(a)}const a=[];for(let s=0;s<g.value.length;s++){const e={name:`Qualification Group ${s+1}`,type:"qualification",order:s,isActive:!0,createdAt:new Date},t=(0,N.H9)((0,N.rJ)(R,"groups"));a.push((0,N.BN)(t,e));const o=g.value[s];o.forEach((e=>{const s=(0,N.H9)(R,"teams",e.id);a.push((0,N.mZ)(s,{groupId:t.id,potId:e.potId}))}))}await Promise.all(a),await(0,N.BN)((0,N.H9)(R,"settings","tournament"),{phase:"qualification",updatedAt:new Date},{merge:!0}),alert("Draw results saved successfully! Tournament phase updated to Qualification.")}catch(e){console.error("Error saving draw results:",e),alert("Error saving draw results: "+e.message)}},B=e=>{let t,a=e.length;while(0!==a)t=Math.floor(Math.random()*a),a--,[e[a],e[t]]=[e[t],e[a]];return e};return(0,s.sV)((()=>{$()})),{teams:t,pots:o,unassignedTeams:a,numPots:i,loading:n,error:r,restrictions:y,numGroups:v,teamsPerGroup:h,totalTeams:_,drawResults:g,drawComplete:f,draggedTeam:l,dragSourcePot:c,dragTargetPot:m,groupDraggedTeam:d,groupDragSourceIndex:u,groupDragTarget:p,updatePots:k,autoAssignTeams:G,resetTeamAssignment:E,updateTeamPot:q,saveTeamPots:O,saveRestrictions:F,runDraw:H,saveDrawResults:W,onDragStart:b,onDragOver:C,onDragLeave:T,onDrop:M,isDropTarget:P,onGroupDragStart:S,onGroupDragOver:D,onGroupDragLeave:A,onGroupDrop:I,getGroupConflicts:x}}},Q=J,j=(0,C.A)(Q,B,U,!1,null,"4263599e",null),V=j.exports,z=function(){var e=this,t=e._self._c;return t("div",{staticClass:"group-management"},[t("div",{staticClass:"groups-section"},[t("div",{staticClass:"section-header"},[t("h3",[e._v("Qualification Groups")]),e.isAdmin?t("div",{staticClass:"header-buttons"},[t("button",{staticClass:"btn add-btn",on:{click:function(t){e.showAddGroupModal=!0}}},[e._v(" Add Group ")]),t("button",{staticClass:"btn delete-btn",attrs:{disabled:0===e.groups.length},on:{click:e.confirmDeleteAllGroups}},[e._v(" Delete All ")])]):e._e()]),e.loading?t("div",{staticClass:"loading"},[e._v("Loading groups...")]):e.error?t("div",{staticClass:"error"},[e._v(" "+e._s(e.error)+" ")]):t("div",[t("div",{staticClass:"groups-list"},e._l(e.sortedGroups,(function(a){return t("div",{key:a.id,staticClass:"group-item"},[t("div",{staticClass:"group-info"},[t("div",{staticClass:"group-header"},[t("h4",[e._v(e._s(a.name))])]),t("div",{staticClass:"group-teams"},[e.getTeamsInGroup(a.id).length>0?t("div",{staticClass:"teams-grid"},e._l(e.getTeamsInGroup(a.id),(function(a){return t("div",{key:a.id,staticClass:"team-pill"},[e._v(" "+e._s(a.name)+" ")])})),0):t("p",{staticClass:"no-teams"},[e._v("No teams assigned to this group")])])]),e.isAdmin?t("div",{staticClass:"group-actions"},[t("button",{staticClass:"btn edit-btn",on:{click:function(t){return e.editGroup(a)}}},[e._v(" Edit ")]),t("button",{staticClass:"btn delete-btn",on:{click:function(t){return e.confirmDeleteGroup(a)}}},[e._v(" Delete ")])]):e._e()])})),0),0===e.groups.length?t("p",{staticClass:"no-data"},[e._v(" No qualification groups found. "+e._s(e.isAdmin?"Add your first qualification group!":"")+" ")]):e._e()])]),e.showAddGroupModal?t("div",{staticClass:"modal-overlay"},[t("div",{staticClass:"modal-content"},[t("div",{staticClass:"modal-header"},[t("h3",[e._v("Add New Group")]),t("button",{staticClass:"close-btn",on:{click:e.closeAddGroupModal}},[e._v("×")])]),t("div",{staticClass:"modal-body"},[t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"group-name"}},[e._v("Group Name:")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.newGroup.name,expression:"newGroup.name"}],attrs:{type:"text",id:"group-name",placeholder:"Enter group name"},domProps:{value:e.newGroup.name},on:{input:function(t){t.target.composing||e.$set(e.newGroup,"name",t.target.value)}}})]),t("div",{staticClass:"team-selection-section"},[t("h4",[e._v("Team Assignment")]),t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"add-team-to-group"}},[e._v("Add Team to Group:")]),t("div",{staticClass:"add-team-row"},[t("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedNewTeamToAdd,expression:"selectedNewTeamToAdd"}],staticClass:"team-select",attrs:{id:"add-team-to-group"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.selectedNewTeamToAdd=t.target.multiple?a:a[0]}}},[t("option",{attrs:{value:""}},[e._v("-- Select Team --")]),e._l(e.availableTeamsForNew,(function(a){return t("option",{key:a.id,domProps:{value:a.id}},[e._v(" "+e._s(a.name)+" ")])}))],2),t("button",{staticClass:"btn add-team-btn",attrs:{disabled:!e.selectedNewTeamToAdd},on:{click:e.addTeamToNewGroup}},[e._v(" Add Team ")])])]),e.selectedTeamsForNewGroup.length>0?t("div",{staticClass:"current-teams"},[t("h5",[e._v("Current Teams in Group")]),t("div",{staticClass:"teams-grid"},e._l(e.selectedTeamsForNewGroup,(function(a){return t("div",{key:a.id,staticClass:"team-pill with-action"},[t("span",[e._v(e._s(a.name))]),t("button",{staticClass:"remove-btn",on:{click:function(t){return e.removeTeamFromNewGroup(a)}}},[e._v(" × ")])])})),0)]):t("p",{staticClass:"no-teams"},[e._v("No teams assigned")])])]),t("div",{staticClass:"modal-footer"},[t("button",{staticClass:"btn save-btn",on:{click:e.saveGroup}},[e._v("Save Group")]),t("button",{staticClass:"btn cancel-btn",on:{click:e.closeAddGroupModal}},[e._v(" Cancel ")])])])]):e._e(),e.showEditGroupModal?t("div",{staticClass:"modal-overlay"},[t("div",{staticClass:"modal-content"},[t("div",{staticClass:"modal-header"},[t("h3",[e._v("Edit Group")]),t("button",{staticClass:"close-btn",on:{click:e.closeEditGroupModal}},[e._v(" × ")])]),t("div",{staticClass:"modal-body"},[t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"edit-group-name"}},[e._v("Group Name:")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.editingGroup.name,expression:"editingGroup.name"}],attrs:{type:"text",id:"edit-group-name",placeholder:"Enter name"},domProps:{value:e.editingGroup.name},on:{input:function(t){t.target.composing||e.$set(e.editingGroup,"name",t.target.value)}}})]),t("div",{staticClass:"team-selection-section"},[t("h4",[e._v("Team Assignment")]),t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"edit-add-team"}},[e._v("Add Team to Group:")]),t("div",{staticClass:"add-team-row"},[t("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedTeamToAdd,expression:"selectedTeamToAdd"}],staticClass:"team-select",attrs:{id:"edit-add-team"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.selectedTeamToAdd=t.target.multiple?a:a[0]}}},[t("option",{attrs:{value:""}},[e._v("-- Select Team --")]),e._l(e.availableTeams,(function(a){return t("option",{key:a.id,domProps:{value:a.id}},[e._v(" "+e._s(a.name)+" ")])}))],2),t("button",{staticClass:"btn add-team-btn",attrs:{disabled:!e.selectedTeamToAdd},on:{click:e.addTeamToGroup}},[e._v(" Add Team ")])])]),e.getTeamsInGroup(e.editingGroup.id).length>0?t("div",{staticClass:"current-teams"},[t("h5",[e._v("Current Teams in Group")]),t("div",{staticClass:"teams-grid"},e._l(e.getTeamsInGroup(e.editingGroup.id),(function(a){return t("div",{key:a.id,staticClass:"team-pill with-action"},[t("span",[e._v(e._s(a.name))]),t("button",{staticClass:"remove-btn",on:{click:function(t){return e.removeTeamFromGroup(a)}}},[e._v(" × ")])])})),0)]):t("p",{staticClass:"no-teams"},[e._v("No teams assigned")])])]),t("div",{staticClass:"modal-footer"},[t("button",{staticClass:"btn save-btn",on:{click:e.updateGroup}},[e._v(" Update Group ")]),t("button",{staticClass:"btn cancel-btn",on:{click:e.closeEditGroupModal}},[e._v(" Cancel ")])])])]):e._e(),e.showDeleteModal?t("div",{staticClass:"modal-overlay"},[t("div",{staticClass:"modal-content"},[t("div",{staticClass:"modal-header"},[t("h3",[e._v("Confirm Delete")]),t("button",{staticClass:"close-btn",on:{click:function(t){e.showDeleteModal=!1}}},[e._v(" × ")])]),t("div",{staticClass:"modal-body"},[t("p",[e._v(" Are you sure you want to delete group: "),t("strong",[e._v(e._s(e.groupToDelete?.name))]),e._v("? ")]),t("p",{staticClass:"warning"},[e._v(" This action cannot be undone. Any teams in this group will need to be reassigned. ")]),e.getTeamsInGroup(e.groupToDelete?.id).length>0?t("div",{staticClass:"affected-teams"},[t("h4",[e._v("The following teams will be affected:")]),t("ul",e._l(e.getTeamsInGroup(e.groupToDelete?.id),(function(a){return t("li",{key:a.id},[e._v(" "+e._s(a.name)+" ")])})),0)]):e._e()]),t("div",{staticClass:"modal-footer"},[t("button",{staticClass:"btn delete-btn",on:{click:e.deleteGroup}},[e._v("Delete")]),t("button",{staticClass:"btn cancel-btn",on:{click:function(t){e.showDeleteModal=!1}}},[e._v(" Cancel ")])])])]):e._e(),e.showDeleteAllModal?t("div",{staticClass:"modal-overlay"},[t("div",{staticClass:"modal-content"},[t("div",{staticClass:"modal-header"},[t("h3",[e._v("Confirm Delete All Groups")]),t("button",{staticClass:"close-btn",on:{click:function(t){e.showDeleteAllModal=!1}}},[e._v(" × ")])]),t("div",{staticClass:"modal-body"},[e._m(0),t("p",{staticClass:"warning"},[e._v(" This action cannot be undone. All teams in these groups will need to be reassigned. ")]),e.getAllAssignedTeams().length>0?t("div",{staticClass:"affected-teams"},[t("h4",[e._v("The following teams will be affected:")]),t("ul",e._l(e.getAllAssignedTeams(),(function(a){return t("li",{key:a.id},[e._v(" "+e._s(a.name)+" ")])})),0)]):e._e()]),t("div",{staticClass:"modal-footer"},[t("button",{staticClass:"btn delete-btn",on:{click:e.deleteAllGroups}},[e._v(" Delete All ")]),t("button",{staticClass:"btn cancel-btn",on:{click:function(t){e.showDeleteAllModal=!1}}},[e._v(" Cancel ")])])])]):e._e()])},Z=[function(){var e=this,t=e._self._c;return t("p",[e._v(" Are you sure you want to delete "),t("strong",[e._v("ALL")]),e._v(" qualification groups? ")])}],Y={name:"QualificationGroupManagement",props:{isAdmin:{type:Boolean,default:!1}},data(){return{groups:[],teams:[],allTeams:[],loading:!0,error:null,showAddGroupModal:!1,showEditGroupModal:!1,showDeleteModal:!1,showDeleteAllModal:!1,newGroup:{name:""},editingGroup:{id:"",name:""},groupToDelete:null,selectedTeamToAdd:"",selectedNewTeamToAdd:"",selectedTeamsForNewGroup:[],teamSearchQuery:""}},computed:{sortedGroups(){return[...this.groups].sort(((e,t)=>(e.order||0)-(t.order||0)))},availableTeams(){return this.teams.filter((e=>!e.groupId))},availableTeamsForNew(){const e=this.selectedTeamsForNewGroup.map((e=>e.id));return this.teams.filter((t=>!e.includes(t.id)&&!t.groupId))},filteredAllTeams(){if(!this.teamSearchQuery)return this.allTeams;const e=this.teamSearchQuery.toLowerCase().trim();return this.allTeams.filter((t=>t.name.toLowerCase().includes(e)||t.company&&t.company.toLowerCase().includes(e)))}},mounted(){console.log("GroupManagement component mounted"),this.loadData()},methods:{async loadData(){try{this.loading=!0,this.error=null,console.log("Starting data loading process...");try{console.log("Attempting to fetch teams...");const e=(0,N.rJ)(R,"teams"),t=await(0,N.GG)(e);console.log(`Teams fetch successful, found: ${t.size} documents`),this.teams=[],this.allTeams=[],t.forEach((e=>{const t={id:e.id,...e.data()};this.teams.push(t),this.allTeams.push(t)})),console.log(`Teams processed: ${this.teams.length}`)}catch(e){throw console.error("Error fetching teams:",e),new Error(`Failed to load teams: ${e.message}`)}try{console.log("Attempting to fetch groups...");const e=(0,N.rJ)(R,"groups"),t=(0,N.P)(e,(0,N._M)("type","==","qualification")),a=await(0,N.GG)(t);console.log(`Groups fetch successful, found: ${a.size} documents`),this.groups=[],a.forEach((e=>{this.groups.push({id:e.id,...e.data()})})),console.log(`Groups processed: ${this.groups.length}`)}catch(t){throw console.error("Error fetching groups:",t),new Error(`Failed to load groups: ${t.message}`)}this.loading=!1,console.log("Data loading completed successfully")}catch(a){console.error("Data loading failed:",a),this.error=a.message||"Failed to load data. Please try again.",this.loading=!1}},getTeamsInGroup(e){return e?this.teams.filter((t=>t.groupId===e)):[]},addTeamToNewGroup(){if(!this.selectedNewTeamToAdd)return;const e=this.teams.find((e=>e.id===this.selectedNewTeamToAdd));e&&(this.selectedTeamsForNewGroup.some((t=>t.id===e.id))||this.selectedTeamsForNewGroup.push(e),this.selectedNewTeamToAdd="")},removeTeamFromNewGroup(e){const t=this.selectedTeamsForNewGroup.findIndex((t=>t.id===e.id));-1!==t&&this.selectedTeamsForNewGroup.splice(t,1)},closeAddGroupModal(){this.showAddGroupModal=!1,this.newGroup.name="",this.selectedTeamsForNewGroup=[],this.selectedNewTeamToAdd=""},closeEditGroupModal(){this.showEditGroupModal=!1,this.editingGroup.id="",this.editingGroup.name="",this.selectedTeamToAdd=""},async saveGroup(){if(this.newGroup.name)try{const e={name:this.newGroup.name,type:"qualification",order:this.sortedGroups.length+1,isActive:!0,createdAt:(0,N.O5)()},t=await(0,N.gS)((0,N.rJ)(R,"groups"),e),a=t.id;if(this.selectedTeamsForNewGroup.length>0){const e=this.selectedTeamsForNewGroup.map((e=>(0,N.mZ)((0,N.H9)(R,"teams",e.id),{groupId:a})));await Promise.all(e)}this.newGroup.name="",this.selectedTeamsForNewGroup=[],this.showAddGroupModal=!1,await this.loadData()}catch(e){alert("Error adding group. Please try again."),console.error("Error saving group:",e)}else alert("Group name is required")},editGroup(e){this.editingGroup.id=e.id,this.editingGroup.name=e.name,this.showEditGroupModal=!0},async updateGroup(){if(this.editingGroup.name)try{const e={name:this.editingGroup.name,updatedAt:(0,N.O5)()};await(0,N.mZ)((0,N.H9)(R,"groups",this.editingGroup.id),e),this.showEditGroupModal=!1,await this.loadData()}catch(e){alert("Error updating group. Please try again."),console.error(e)}else alert("Group name is required")},confirmDeleteGroup(e){this.groupToDelete=e,this.showDeleteModal=!0},async deleteGroup(){if(this.groupToDelete)try{const e=this.getTeamsInGroup(this.groupToDelete.id),t=e.map((e=>{const t=(0,N.H9)(R,"teams",e.id);return(0,N.mZ)(t,{groupId:null})}));await Promise.all(t),await(0,N.kd)((0,N.H9)(R,"groups",this.groupToDelete.id)),this.showDeleteModal=!1,this.groupToDelete=null,await this.loadData()}catch(e){alert("Error deleting group. Please try again."),console.error(e)}},async addTeamToGroup(){if(this.selectedTeamToAdd&&this.editingGroup.id)try{const e=(0,N.H9)(R,"teams",this.selectedTeamToAdd);await(0,N.mZ)(e,{groupId:this.editingGroup.id}),this.selectedTeamToAdd="";const t=await(0,N.GG)((0,N.rJ)(R,"teams"));this.teams=[],t.forEach((e=>{this.teams.push({id:e.id,...e.data()})}))}catch(e){console.error("Error adding team to group:",e),alert("Error adding team to group. Please try again.")}},async removeTeamFromGroup(e){try{const t=(0,N.H9)(R,"teams",e.id);await(0,N.mZ)(t,{groupId:null});const a=await(0,N.GG)((0,N.rJ)(R,"teams"));this.teams=[],a.forEach((e=>{this.teams.push({id:e.id,...e.data()})}))}catch(t){console.error("Error removing team from group:",t),alert("Error removing team from group. Please try again.")}},confirmDeleteAllGroups(){0!==this.groups.length?this.showDeleteAllModal=!0:alert("No groups to delete.")},getAllAssignedTeams(){return this.teams.filter((e=>e.groupId))},async deleteAllGroups(){try{const e=this.getAllAssignedTeams(),t=e.map((e=>{const t=(0,N.H9)(R,"teams",e.id);return(0,N.mZ)(t,{groupId:null})}));await Promise.all(t);const a=this.groups.map((e=>(0,N.kd)((0,N.H9)(R,"groups",e.id))));await Promise.all(a),this.showDeleteAllModal=!1,await this.loadData()}catch(e){alert("Error deleting groups. Please try again."),console.error("Error deleting all groups:",e)}}}},X=Y,ee=(0,C.A)(X,z,Z,!1,null,"61009033",null),te=ee.exports,ae=function(){var e=this,t=e._self._c;return t("div",{staticClass:"matches-container"},[t("h2",[e._v(" "+e._s("qualification"===e.phase?"Qualification":"Division")+" Matches ")]),e.loading?t("div",{staticClass:"loading-container"},[t("div",{staticClass:"loading-spinner"}),t("p",[e._v("Loading matches...")])]):e.error?t("div",{staticClass:"error-container"},[t("i",{staticClass:"error-icon"},[e._v("!")]),t("p",[e._v(e._s(e.error))])]):t("div",[e.isAdmin?t("div",{staticClass:"action-bar"},[t("button",{staticClass:"action-btn schedule-btn",on:{click:function(t){e.showScheduleModal=!0}}},[t("i",{staticClass:"icon-plus"},[e._v("+")]),e._v(" Add Match ")]),t("button",{staticClass:"action-btn generate-btn",on:{click:function(t){e.showGenerateModal=!0}}},[t("i",{staticClass:"icon-calendar"},[e._v("📅")]),e._v(" Generate Matches ")]),t("button",{staticClass:"action-btn delete-all-btn",on:{click:e.confirmDeleteAll}},[t("i",{staticClass:"icon-trash"},[e._v("🗑️")]),e._v(" Delete All Matches ")])]):e._e(),t("div",{staticClass:"filter-controls"},[t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"group-filter"}},[e._v("Filter by "+e._s("qualification"===e.phase?"Group":"Division")+":")]),t("select",{directives:[{name:"model",rawName:"v-model",value:e.groupFilter,expression:"groupFilter"}],staticClass:"filter-select",attrs:{id:"group-filter"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.groupFilter=t.target.multiple?a:a[0]}}},[t("option",{attrs:{value:""}},[e._v(" All "+e._s("qualification"===e.phase?"Groups":"Divisions")+" ")]),e._l(e.groups,(function(a){return t("option",{key:a.id,domProps:{value:a.id}},[e._v(" "+e._s(a.name)+" ")])}))],2)])]),e.groupedMatches.length>0?t("div",{staticClass:"match-list"},e._l(e.groupedMatches,(function(a,s){return t("div",{key:s,staticClass:"match-group"},[t("div",{staticClass:"date-header"},[t("h3",[e._v(e._s(e.formatDateHeader(a.date)))]),t("span",{staticClass:"match-count"},[e._v(e._s(a.matches.length)+" "+e._s(1===a.matches.length?"match":"matches"))])]),t("div",{staticClass:"match-table"},[t("table",[t("thead",[t("tr",[t("th",{staticClass:"team1-column"},[e._v("Home Team")]),t("th",{staticClass:"vs-column"}),t("th",{staticClass:"team2-column"},[e._v("Away Team")]),t("th",{staticClass:"time-column"},[e._v("Time")]),t("th",{staticClass:"location-column"},[e._v("Tables")]),e.isAdmin?t("th",{staticClass:"actions-header"},[e._v("Actions")]):e._e()])]),t("tbody",e._l(a.matches,(function(a){return t("tr",{key:a.id,staticClass:"match-row"},[t("td",{staticClass:"match-team home-team"},[e._v(" "+e._s(a.homeTeam||a.player1)+" ")]),t("td",{staticClass:"vs-column"},[e._v("🆚")]),t("td",{staticClass:"match-team away-team"},[e._v(" "+e._s(a.awayTeam||a.player2)+" ")]),t("td",{staticClass:"match-time time-column"},[e._v(" "+e._s(a.time||"TBD")+" ")]),t("td",{staticClass:"location-column"},[e._v(" "+e._s(a.location||"-")+" ")]),e.isAdmin?t("td",{staticClass:"row-actions"},[t("div",{staticClass:"action-buttons"},[t("button",{staticClass:"row-btn edit-btn",attrs:{title:"Edit Match"},on:{click:function(t){return e.editMatch(a)}}},[e._v(" Edit ")]),t("button",{staticClass:"row-btn score-btn",attrs:{title:"Add Result"},on:{click:function(t){return e.assignResult(a)}}},[e._v(" Result ")]),t("button",{staticClass:"row-btn delete-btn",attrs:{title:"Delete Match"},on:{click:function(t){return e.confirmDelete(a)}}},[e._v(" Delete ")])])]):e._e()])})),0)])])])})),0):t("div",{staticClass:"no-matches"},[t("p",[e._v(" No upcoming "+e._s("qualification"===e.phase?"qualification":"division")+" matches found ")])])]),e.showScheduleModal?t("div",{staticClass:"modal-overlay"},[t("div",{staticClass:"modal-content"},[t("div",{staticClass:"modal-header"},[t("h3",[e._v(" Schedule New "+e._s("qualification"===e.phase?"Qualification":"Division")+" Match ")]),t("button",{staticClass:"close-btn",on:{click:function(t){e.showScheduleModal=!1}}},[e._v(" × ")])]),t("div",{staticClass:"modal-body"},[t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"new-match-group"}},[e._v(e._s("qualification"===e.phase?"Group":"Division")+":")]),t("select",{directives:[{name:"model",rawName:"v-model",value:e.newMatch.groupId,expression:"newMatch.groupId"}],attrs:{id:"new-match-group",required:""},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.newMatch,"groupId",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:""}},[e._v(" -- Select "+e._s("qualification"===e.phase?"group":"division")+" -- ")]),e._l(e.groups,(function(a){return t("option",{key:a.id,domProps:{value:a.id}},[e._v(" "+e._s(a.name)+" ")])}))],2)]),t("div",{staticClass:"form-row"},[t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"new-match-date"}},[e._v("Date:")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.newMatch.dateString,expression:"newMatch.dateString"}],attrs:{id:"new-match-date",type:"date",required:""},domProps:{value:e.newMatch.dateString},on:{input:function(t){t.target.composing||e.$set(e.newMatch,"dateString",t.target.value)}}})]),t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"new-match-time"}},[e._v("Time:")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.newMatch.time,expression:"newMatch.time"}],attrs:{id:"new-match-time",type:"time"},domProps:{value:e.newMatch.time},on:{input:function(t){t.target.composing||e.$set(e.newMatch,"time",t.target.value)}}})])]),t("div",{staticClass:"form-row"},[t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"new-match-home-team"}},[e._v("Home Team:")]),t("select",{directives:[{name:"model",rawName:"v-model",value:e.newMatch.homeTeam,expression:"newMatch.homeTeam"}],attrs:{id:"new-match-home-team",required:""},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.newMatch,"homeTeam",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:""}},[e._v("-- Select team --")]),e._l(e.filteredTeams,(function(a){return t("option",{key:`home-${a.id}`,domProps:{value:a.name}},[e._v(" "+e._s(a.name)+" ")])}))],2)]),t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"new-match-away-team"}},[e._v("Away Team:")]),t("select",{directives:[{name:"model",rawName:"v-model",value:e.newMatch.awayTeam,expression:"newMatch.awayTeam"}],attrs:{id:"new-match-away-team",required:""},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.newMatch,"awayTeam",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:""}},[e._v("-- Select team --")]),e._l(e.filteredTeams,(function(a){return t("option",{key:`away-${a.id}`,domProps:{value:a.name}},[e._v(" "+e._s(a.name)+" ")])}))],2)])]),t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"new-match-location"}},[e._v("Tables:")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.newMatch.location,expression:"newMatch.location"}],attrs:{type:"text",id:"new-match-location",placeholder:"Match location"},domProps:{value:e.newMatch.location},on:{input:function(t){t.target.composing||e.$set(e.newMatch,"location",t.target.value)}}})])]),t("div",{staticClass:"modal-footer"},[t("button",{staticClass:"btn save-btn",on:{click:e.scheduleMatch}},[e._v(" Schedule Match ")]),t("button",{staticClass:"btn cancel-btn",on:{click:function(t){e.showScheduleModal=!1}}},[e._v(" Cancel ")])])])]):e._e(),e.showEditModal?t("div",{staticClass:"modal-overlay"},[t("div",{staticClass:"modal-content"},[t("div",{staticClass:"modal-header"},[t("h3",[e._v(" Edit "+e._s("qualification"===e.phase?"Qualification":"Division")+" Match ")]),t("button",{staticClass:"close-btn",on:{click:function(t){e.showEditModal=!1}}},[e._v("×")])]),t("div",{staticClass:"modal-body"},[t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"edit-match-group"}},[e._v(e._s("qualification"===e.phase?"Group":"Division")+":")]),t("select",{directives:[{name:"model",rawName:"v-model",value:e.editingMatch.groupId,expression:"editingMatch.groupId"}],attrs:{id:"edit-match-group"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.editingMatch,"groupId",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:""}},[e._v(" -- Select "+e._s("qualification"===e.phase?"group":"division")+" -- ")]),e._l(e.groups,(function(a){return t("option",{key:a.id,domProps:{value:a.id}},[e._v(" "+e._s(a.name)+" ")])}))],2)]),t("div",{staticClass:"form-row"},[t("div",{staticClass:"form-group"},[t("label",{attrs:{for:`match-date-${e.editingMatch.id}`}},[e._v("Date:")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.editingMatch.dateString,expression:"editingMatch.dateString"}],attrs:{id:`match-date-${e.editingMatch.id}`,type:"date"},domProps:{value:e.editingMatch.dateString},on:{input:function(t){t.target.composing||e.$set(e.editingMatch,"dateString",t.target.value)}}})]),t("div",{staticClass:"form-group"},[t("label",{attrs:{for:`match-time-${e.editingMatch.id}`}},[e._v("Time:")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.editingMatch.time,expression:"editingMatch.time"}],attrs:{id:`match-time-${e.editingMatch.id}`,type:"time"},domProps:{value:e.editingMatch.time},on:{input:function(t){t.target.composing||e.$set(e.editingMatch,"time",t.target.value)}}})])]),t("div",{staticClass:"form-row"},[t("div",{staticClass:"form-group"},[t("label",{attrs:{for:`home-team-${e.editingMatch.id}`}},[e._v("Home Team:")]),t("select",{directives:[{name:"model",rawName:"v-model",value:e.editingMatch.homeTeam,expression:"editingMatch.homeTeam"}],attrs:{id:`home-team-${e.editingMatch.id}`},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.editingMatch,"homeTeam",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:""}},[e._v("-- Select team --")]),e._l(e.teamsForEditGroup,(function(a){return t("option",{key:`home-${a.id}`,domProps:{value:a.name}},[e._v(" "+e._s(a.name)+" ")])}))],2)]),t("div",{staticClass:"form-group"},[t("label",{attrs:{for:`away-team-${e.editingMatch.id}`}},[e._v("Away Team:")]),t("select",{directives:[{name:"model",rawName:"v-model",value:e.editingMatch.awayTeam,expression:"editingMatch.awayTeam"}],attrs:{id:`away-team-${e.editingMatch.id}`},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.editingMatch,"awayTeam",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:""}},[e._v("-- Select team --")]),e._l(e.teamsForEditGroup,(function(a){return t("option",{key:`away-${a.id}`,domProps:{value:a.name}},[e._v(" "+e._s(a.name)+" ")])}))],2)])]),t("div",{staticClass:"form-group"},[t("label",{attrs:{for:`location-${e.editingMatch.id}`}},[e._v("Tables:")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.editingMatch.location,expression:"editingMatch.location"}],attrs:{id:`location-${e.editingMatch.id}`,type:"text",placeholder:"Match location"},domProps:{value:e.editingMatch.location},on:{input:function(t){t.target.composing||e.$set(e.editingMatch,"location",t.target.value)}}})])]),t("div",{staticClass:"modal-footer"},[t("button",{staticClass:"btn save-btn",on:{click:e.updateMatch}},[e._v(" Save Changes ")]),t("button",{staticClass:"btn cancel-btn",on:{click:function(t){e.showEditModal=!1}}},[e._v(" Cancel ")])])])]):e._e(),t("MatchResultForm",{attrs:{showResultModal:e.showResultModal,matchData:e.editingMatch,teams:e.teams},on:{"save-result":e.saveMatchResult,close:function(t){e.showResultModal=!1}}}),e.showDeleteModal?t("div",{staticClass:"modal-overlay"},[t("div",{staticClass:"modal-content"},[t("div",{staticClass:"modal-header"},[t("h3",[e._v("Confirm Delete")]),t("button",{staticClass:"close-btn",on:{click:function(t){e.showDeleteModal=!1}}},[e._v("×")])]),t("div",{staticClass:"modal-body"},[t("p",[e._v("Are you sure you want to delete this upcoming match?")]),t("div",{staticClass:"match-info"},[t("strong",[e._v(e._s(e.matchToDelete.homeTeam)+" 🆚 "+e._s(e.matchToDelete.awayTeam))]),t("br"),t("span",[e._v(e._s(e.formatDate(e.matchToDelete.date)))])]),t("p",{staticClass:"warning"},[e._v("This action cannot be undone.")])]),t("div",{staticClass:"modal-footer"},[t("button",{staticClass:"btn delete-btn",on:{click:e.deleteMatch}},[e._v("Delete")]),t("button",{staticClass:"btn cancel-btn",on:{click:function(t){e.showDeleteModal=!1}}},[e._v(" Cancel ")])])])]):e._e(),e.showGenerateModal?t("div",{staticClass:"modal-overlay"},[t("div",{staticClass:"modal-content large-modal"},[t("div",{staticClass:"modal-header"},[t("h3",[e._v(" Generate "+e._s("qualification"===e.phase?"Qualification":"Division")+" Matches ")]),t("button",{staticClass:"close-btn",on:{click:function(t){e.showGenerateModal=!1}}},[e._v(" × ")])]),t("div",{staticClass:"modal-body"},[t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"generate-group"}},[e._v(e._s("qualification"===e.phase?"Group":"Division")+":")]),t("select",{directives:[{name:"model",rawName:"v-model",value:e.generateSettings.groupId,expression:"generateSettings.groupId"}],attrs:{id:"generate-group",required:""},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.generateSettings,"groupId",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:""}},[e._v(" -- Select "+e._s("qualification"===e.phase?"group":"division")+" -- ")]),e._l(e.groups,(function(a){return t("option",{key:a.id,domProps:{value:a.id}},[e._v(" "+e._s(a.name)+" ")])})),t("option",{attrs:{value:"all"}},[e._v(" All "+e._s("qualification"===e.phase?"Groups":"Divisions")+" ")])],2)]),t("div",{staticClass:"form-row"},[t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"generate-start-date"}},[e._v("Start Date:")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.generateSettings.startDate,expression:"generateSettings.startDate"}],attrs:{id:"generate-start-date",type:"date",required:""},domProps:{value:e.generateSettings.startDate},on:{change:e.generatePotentialMatchDays,input:function(t){t.target.composing||e.$set(e.generateSettings,"startDate",t.target.value)}}})]),t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"generate-end-date"}},[e._v("End Date:")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.generateSettings.endDate,expression:"generateSettings.endDate"}],attrs:{id:"generate-end-date",type:"date"},domProps:{value:e.generateSettings.endDate},on:{change:e.generatePotentialMatchDays,input:function(t){t.target.composing||e.$set(e.generateSettings,"endDate",t.target.value)}}})])]),t("div",{staticClass:"form-group"},[t("label",[e._v("Match Days:")]),t("div",{staticClass:"checkbox-group"},[t("label",{staticClass:"checkbox-label"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.generateSettings.matchDays.monday,expression:"generateSettings.matchDays.monday"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.generateSettings.matchDays.monday)?e._i(e.generateSettings.matchDays.monday,null)>-1:e.generateSettings.matchDays.monday},on:{change:[function(t){var a=e.generateSettings.matchDays.monday,s=t.target,o=!!s.checked;if(Array.isArray(a)){var i=null,n=e._i(a,i);s.checked?n<0&&e.$set(e.generateSettings.matchDays,"monday",a.concat([i])):n>-1&&e.$set(e.generateSettings.matchDays,"monday",a.slice(0,n).concat(a.slice(n+1)))}else e.$set(e.generateSettings.matchDays,"monday",o)},e.generatePotentialMatchDays]}}),e._v(" Monday ")]),t("label",{staticClass:"checkbox-label"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.generateSettings.matchDays.wednesday,expression:"generateSettings.matchDays.wednesday"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.generateSettings.matchDays.wednesday)?e._i(e.generateSettings.matchDays.wednesday,null)>-1:e.generateSettings.matchDays.wednesday},on:{change:[function(t){var a=e.generateSettings.matchDays.wednesday,s=t.target,o=!!s.checked;if(Array.isArray(a)){var i=null,n=e._i(a,i);s.checked?n<0&&e.$set(e.generateSettings.matchDays,"wednesday",a.concat([i])):n>-1&&e.$set(e.generateSettings.matchDays,"wednesday",a.slice(0,n).concat(a.slice(n+1)))}else e.$set(e.generateSettings.matchDays,"wednesday",o)},e.generatePotentialMatchDays]}}),e._v(" Wednesday ")])])]),t("div",{staticClass:"form-group"},[t("label",[e._v("Match Times:")]),t("div",{staticClass:"checkbox-group"},[t("label",{staticClass:"checkbox-label"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.generateSettings.matchTimes["20:00"],expression:"generateSettings.matchTimes['20:00']"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.generateSettings.matchTimes["20:00"])?e._i(e.generateSettings.matchTimes["20:00"],null)>-1:e.generateSettings.matchTimes["20:00"]},on:{change:function(t){var a=e.generateSettings.matchTimes["20:00"],s=t.target,o=!!s.checked;if(Array.isArray(a)){var i=null,n=e._i(a,i);s.checked?n<0&&e.$set(e.generateSettings.matchTimes,"20:00",a.concat([i])):n>-1&&e.$set(e.generateSettings.matchTimes,"20:00",a.slice(0,n).concat(a.slice(n+1)))}else e.$set(e.generateSettings.matchTimes,"20:00",o)}}}),e._v(" 20:00 ")]),t("label",{staticClass:"checkbox-label"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.generateSettings.matchTimes["21:00"],expression:"generateSettings.matchTimes['21:00']"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.generateSettings.matchTimes["21:00"])?e._i(e.generateSettings.matchTimes["21:00"],null)>-1:e.generateSettings.matchTimes["21:00"]},on:{change:function(t){var a=e.generateSettings.matchTimes["21:00"],s=t.target,o=!!s.checked;if(Array.isArray(a)){var i=null,n=e._i(a,i);s.checked?n<0&&e.$set(e.generateSettings.matchTimes,"21:00",a.concat([i])):n>-1&&e.$set(e.generateSettings.matchTimes,"21:00",a.slice(0,n).concat(a.slice(n+1)))}else e.$set(e.generateSettings.matchTimes,"21:00",o)}}}),e._v(" 21:00 ")])])]),t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"generate-location"}},[e._v("Default Location:")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.generateSettings.location,expression:"generateSettings.location"}],attrs:{type:"text",id:"generate-location",placeholder:"e.g. TBTK Hall"},domProps:{value:e.generateSettings.location},on:{input:function(t){t.target.composing||e.$set(e.generateSettings,"location",t.target.value)}}})]),e.potentialMatchDays.length>0?t("div",{staticClass:"form-group"},[t("label",[e._v("Select/Deselect Specific Match Dates:")]),t("p",{staticClass:"help-text"},[e._v(" Uncheck dates that should be excluded (holidays, facility closures, etc.) ")]),t("div",{staticClass:"match-days-grid"},e._l(e.potentialMatchDays,(function(a,s){return t("div",{key:s,staticClass:"match-day-item"},[t("label",{staticClass:"checkbox-label match-day-checkbox"},[t("input",{directives:[{name:"model",rawName:"v-model",value:a.selected,expression:"day.selected"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(a.selected)?e._i(a.selected,null)>-1:a.selected},on:{change:function(t){var s=a.selected,o=t.target,i=!!o.checked;if(Array.isArray(s)){var n=null,r=e._i(s,n);o.checked?r<0&&e.$set(a,"selected",s.concat([n])):r>-1&&e.$set(a,"selected",s.slice(0,r).concat(s.slice(r+1)))}else e.$set(a,"selected",i)}}}),t("span",{class:{"excluded-date":!a.selected}},[e._v(" "+e._s(e.formatDateHeader(a.date))+" ")])])])})),0)]):e._e(),t("div",{staticClass:"form-group"},[t("label",{staticClass:"checkbox-label"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.generateSettings.respectPreferences,expression:"generateSettings.respectPreferences"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.generateSettings.respectPreferences)?e._i(e.generateSettings.respectPreferences,null)>-1:e.generateSettings.respectPreferences},on:{change:function(t){var a=e.generateSettings.respectPreferences,s=t.target,o=!!s.checked;if(Array.isArray(a)){var i=null,n=e._i(a,i);s.checked?n<0&&e.$set(e.generateSettings,"respectPreferences",a.concat([i])):n>-1&&e.$set(e.generateSettings,"respectPreferences",a.slice(0,n).concat(a.slice(n+1)))}else e.$set(e.generateSettings,"respectPreferences",o)}}}),e._v(" Respect team day/time preferences ")])]),t("div",{staticClass:"form-group info-setting"},[t("label",{staticClass:"checkbox-label"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.generateSettings.limitOneMatchPerTeamPerWeek,expression:"generateSettings.limitOneMatchPerTeamPerWeek"}],attrs:{type:"checkbox",checked:""},domProps:{checked:Array.isArray(e.generateSettings.limitOneMatchPerTeamPerWeek)?e._i(e.generateSettings.limitOneMatchPerTeamPerWeek,null)>-1:e.generateSettings.limitOneMatchPerTeamPerWeek},on:{change:function(t){var a=e.generateSettings.limitOneMatchPerTeamPerWeek,s=t.target,o=!!s.checked;if(Array.isArray(a)){var i=null,n=e._i(a,i);s.checked?n<0&&e.$set(e.generateSettings,"limitOneMatchPerTeamPerWeek",a.concat([i])):n>-1&&e.$set(e.generateSettings,"limitOneMatchPerTeamPerWeek",a.slice(0,n).concat(a.slice(n+1)))}else e.$set(e.generateSettings,"limitOneMatchPerTeamPerWeek",o)}}}),t("span",[e._v("Maximum 1 match per team per week")]),e._m(0)])]),e._m(1),t("div",{staticClass:"info-message tables-info"},[t("p",[t("strong",[e._v("Tables organization:")]),e._v(" "+e._s(e.maxTables)+" tables ("+e._s(Math.floor(e.maxTables/2))+" table pairs) ")]),t("p",{staticClass:"info-detail"},[e._v(" • Each match uses one table pair (e.g., Tables 1-2)"),t("br"),e._v(" • Each table pair can host one match at 20:00 and one match at 21:00"),t("br"),e._v(" • Maximum "+e._s(Math.floor(e.maxTables/2))+" matches per timeslot ")])]),"all"===e.generateSettings.groupId?t("div",{staticClass:"warning-message"},[t("p",[e._v(" Note: Generating matches for all "+e._s("qualification"===e.phase?"groups":"divisions")+" may take a moment. ")])]):e._e()]),t("div",{staticClass:"modal-footer"},[t("button",{staticClass:"btn generate-btn",attrs:{disabled:e.isGenerating||0===e.potentialMatchDays.length},on:{click:e.generateMatches}},[e._v(" "+e._s(e.isGenerating?"Generating...":"Generate Matches")+" ")]),t("button",{staticClass:"btn cancel-btn",on:{click:function(t){e.showGenerateModal=!1}}},[e._v(" Cancel ")])])])]):e._e(),e.showDeleteAllModal?t("div",{staticClass:"modal-overlay"},[t("div",{staticClass:"modal-content"},[t("div",{staticClass:"modal-header"},[t("h3",[e._v("Confirm Delete All Matches")]),t("button",{staticClass:"close-btn",on:{click:function(t){e.showDeleteAllModal=!1}}},[e._v(" × ")])]),t("div",{staticClass:"modal-body"},[t("div",{staticClass:"alert-icon"},[e._v("⚠️")]),t("p",[e._v(" Are you sure you want to delete "),t("strong",[e._v("ALL")]),e._v(" "+e._s("qualification"===e.phase?"qualification":"division")+" matches? ")]),t("p",{staticClass:"warning"},[e._v(" This action cannot be undone and will remove all matches for the current phase. ")])]),t("div",{staticClass:"modal-footer"},[t("button",{staticClass:"btn delete-btn",on:{click:e.deleteAllMatches}},[e._v(" Delete All Matches ")]),t("button",{staticClass:"btn cancel-btn",on:{click:function(t){e.showDeleteAllModal=!1}}},[e._v(" Cancel ")])])])]):e._e()],1)},se=[function(){var e=this,t=e._self._c;return t("span",{staticClass:"setting-tip"},[t("i",{staticClass:"tip-icon"},[e._v("ⓘ")]),t("span",{staticClass:"tooltip-text"},[e._v(" Recommended default: Ensures teams play only one match per week ")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"info-message"},[t("p",[t("strong",[e._v("Match distribution strategy:")])]),t("p",{staticClass:"info-detail"},[e._v(" • Teams play a maximum of 1 match per week"),t("br"),e._v(" • Matches are balanced between Monday and Wednesday when possible"),t("br"),e._v(" • Teams with day preferences (Monday Only/Wednesday Only) are respected"),t("br"),e._v(" • Each table pair hosts one match per time slot ")])])}],oe=function(){var e=this,t=e._self._c;return t("div",{staticClass:"team-match-result-dialog"},[e.showResultModal?t("div",{staticClass:"modal-overlay"},[t("div",{staticClass:"modal-content large-modal"},[t("div",{staticClass:"modal-header"},[t("h3",[e._v("Add Team Match Results")]),t("button",{staticClass:"close-btn",on:{click:e.cancelAndClose}},[e._v("×")])]),t("div",{staticClass:"modal-body"},[t("div",{staticClass:"match-teams-header"},[t("div",{staticClass:"match-info"},[t("div",{staticClass:"match-date"},[e._v(" "+e._s(e.formatDate(e.matchData.date))+" | "+e._s(e.matchData.time||"TBD")+" ")]),t("div",{staticClass:"match-teams"},[e._v(" "+e._s(e.matchData.homeTeam)+" 🆚 "+e._s(e.matchData.awayTeam)+" ")]),e.matchData.location?t("div",{staticClass:"location"},[e._v(" Tables: "+e._s(e.matchData.location)+" ")]):e._e()])]),t("div",{staticClass:"team-match-form"},[e._m(0),t("div",{staticClass:"form-row match-row"},[t("div",{staticClass:"match-cell"},[e._v("S1")]),t("div",{staticClass:"player-cell"},[t("select",{directives:[{name:"model",rawName:"v-model",value:e.teamMatch.matches[0].homePlayer,expression:"teamMatch.matches[0].homePlayer"}],staticClass:"player-select",on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.teamMatch.matches[0],"homePlayer",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:""}},[e._v("-- Select player --")]),e._l(e.homeTeamPlayers,(function(a,s){return t("option",{key:`home-s1-${s}-${a.firstName||s}`,domProps:{value:a.firstName}},[e._v(" "+e._s(a.firstName)+" ")])}))],2)]),t("div",{staticClass:"player-cell"},[t("select",{directives:[{name:"model",rawName:"v-model",value:e.teamMatch.matches[0].awayPlayer,expression:"teamMatch.matches[0].awayPlayer"}],staticClass:"player-select",on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.teamMatch.matches[0],"awayPlayer",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:""}},[e._v("-- Select player --")]),e._l(e.awayTeamPlayers,(function(a,s){return t("option",{key:`away-s1-${s}-${a.firstName||s}`,domProps:{value:a.firstName}},[e._v(" "+e._s(a.firstName)+" ")])}))],2)]),e._l(5,(function(a){return t("div",{key:`s1-game-${a}`,staticClass:"game-cell"},[t("div",{staticClass:"game-score-inputs"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.teamMatch.matches[0].games[a-1].home,expression:"teamMatch.matches[0].games[gameIndex - 1].home"}],staticClass:"score-input",attrs:{type:"number",min:"0",max:"99"},domProps:{value:e.teamMatch.matches[0].games[a-1].home},on:{input:[function(t){t.target.composing||e.$set(e.teamMatch.matches[0].games[a-1],"home",t.target.value)},function(t){return e.updateMatchScore(0)}]}}),t("span",{staticClass:"score-separator"},[e._v("-")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.teamMatch.matches[0].games[a-1].away,expression:"teamMatch.matches[0].games[gameIndex - 1].away"}],staticClass:"score-input",attrs:{type:"number",min:"0",max:"99"},domProps:{value:e.teamMatch.matches[0].games[a-1].away},on:{input:[function(t){t.target.composing||e.$set(e.teamMatch.matches[0].games[a-1],"away",t.target.value)},function(t){return e.updateMatchScore(0)}]}})])])})),t("div",{staticClass:"score-cell match-score"},[e._v(" "+e._s(e.teamMatch.matches[0].homeScore)+"-"+e._s(e.teamMatch.matches[0].awayScore)+" ")]),t("div",{staticClass:"team-score-cell"},[e.cumulativeScores[0]&&e.cumulativeScores[0].completed?t("div",{staticClass:"team-points-display"},[e._v(" "+e._s(e.cumulativeScores[0].home)+" "),t("span",{staticClass:"score-separator"},[e._v("-")]),e._v(" "+e._s(e.cumulativeScores[0].away)+" ")]):t("div",{staticClass:"team-points-display"},[e._v("-")])])],2),t("div",{staticClass:"form-row match-row"},[t("div",{staticClass:"match-cell"},[e._v("S2")]),t("div",{staticClass:"player-cell"},[t("select",{directives:[{name:"model",rawName:"v-model",value:e.teamMatch.matches[1].homePlayer,expression:"teamMatch.matches[1].homePlayer"}],staticClass:"player-select",on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.teamMatch.matches[1],"homePlayer",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:""}},[e._v("-- Select player --")]),e._l(e.homeTeamPlayers,(function(a,s){return t("option",{key:`home-s2-${s}-${a.firstName||s}`,domProps:{value:a.firstName}},[e._v(" "+e._s(a.firstName)+" ")])}))],2)]),t("div",{staticClass:"player-cell"},[t("select",{directives:[{name:"model",rawName:"v-model",value:e.teamMatch.matches[1].awayPlayer,expression:"teamMatch.matches[1].awayPlayer"}],staticClass:"player-select",on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.teamMatch.matches[1],"awayPlayer",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:""}},[e._v("-- Select player --")]),e._l(e.awayTeamPlayers,(function(a,s){return t("option",{key:`away-s2-${s}-${a.firstName||s}`,domProps:{value:a.firstName}},[e._v(" "+e._s(a.firstName)+" ")])}))],2)]),e._l(5,(function(a){return t("div",{key:`s2-game-${a}`,staticClass:"game-cell"},[t("div",{staticClass:"game-score-inputs"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.teamMatch.matches[1].games[a-1].home,expression:"teamMatch.matches[1].games[gameIndex - 1].home"}],staticClass:"score-input",attrs:{type:"number",min:"0",max:"99"},domProps:{value:e.teamMatch.matches[1].games[a-1].home},on:{input:[function(t){t.target.composing||e.$set(e.teamMatch.matches[1].games[a-1],"home",t.target.value)},function(t){return e.updateMatchScore(1)}]}}),t("span",{staticClass:"score-separator"},[e._v("-")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.teamMatch.matches[1].games[a-1].away,expression:"teamMatch.matches[1].games[gameIndex - 1].away"}],staticClass:"score-input",attrs:{type:"number",min:"0",max:"99"},domProps:{value:e.teamMatch.matches[1].games[a-1].away},on:{input:[function(t){t.target.composing||e.$set(e.teamMatch.matches[1].games[a-1],"away",t.target.value)},function(t){return e.updateMatchScore(1)}]}})])])})),t("div",{staticClass:"score-cell match-score"},[e._v(" "+e._s(e.teamMatch.matches[1].homeScore)+"-"+e._s(e.teamMatch.matches[1].awayScore)+" ")]),t("div",{staticClass:"team-score-cell"},[e.cumulativeScores[1]&&e.cumulativeScores[1].completed?t("div",{staticClass:"team-points-display"},[e._v(" "+e._s(e.cumulativeScores[1].home)+" "),t("span",{staticClass:"score-separator"},[e._v("-")]),e._v(" "+e._s(e.cumulativeScores[1].away)+" ")]):t("div",{staticClass:"team-points-display"},[e._v("-")])])],2),t("div",{staticClass:"form-row match-row doubles-row"},[t("div",{staticClass:"match-cell"},[e._v("Dbl")]),t("div",{staticClass:"player-cell"},[t("div",{staticClass:"doubles-players"},[t("select",{directives:[{name:"model",rawName:"v-model",value:e.teamMatch.matches[2].homePlayer,expression:"teamMatch.matches[2].homePlayer"}],staticClass:"player-select",on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.teamMatch.matches[2],"homePlayer",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:""}},[e._v("-- Select player 1 --")]),e._l(e.homeTeamPlayers,(function(a,s){return t("option",{key:`home-dbl1-${s}-${a.firstName||s}`,domProps:{value:a.firstName}},[e._v(" "+e._s(a.firstName)+" ")])}))],2),t("select",{directives:[{name:"model",rawName:"v-model",value:e.teamMatch.matches[2].homePartner,expression:"teamMatch.matches[2].homePartner"}],staticClass:"player-select",on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.teamMatch.matches[2],"homePartner",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:""}},[e._v("-- Select player 2 --")]),e._l(e.homeTeamPlayers,(function(a,s){return t("option",{key:`home-dbl2-${s}-${a.firstName||s}`,attrs:{disabled:a.firstName===e.teamMatch.matches[2].homePlayer},domProps:{value:a.firstName}},[e._v(" "+e._s(a.firstName)+" ")])}))],2)])]),t("div",{staticClass:"player-cell"},[t("div",{staticClass:"doubles-players"},[t("select",{directives:[{name:"model",rawName:"v-model",value:e.teamMatch.matches[2].awayPlayer,expression:"teamMatch.matches[2].awayPlayer"}],staticClass:"player-select",on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.teamMatch.matches[2],"awayPlayer",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:""}},[e._v("-- Select player 1 --")]),e._l(e.awayTeamPlayers,(function(a,s){return t("option",{key:`away-dbl1-${s}-${a.firstName||s}`,domProps:{value:a.firstName}},[e._v(" "+e._s(a.firstName)+" ")])}))],2),t("select",{directives:[{name:"model",rawName:"v-model",value:e.teamMatch.matches[2].awayPartner,expression:"teamMatch.matches[2].awayPartner"}],staticClass:"player-select",on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.teamMatch.matches[2],"awayPartner",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:""}},[e._v("-- Select player 2 --")]),e._l(e.awayTeamPlayers,(function(a,s){return t("option",{key:`away-dbl2-${s}-${a.firstName||s}`,attrs:{disabled:a.firstName===e.teamMatch.matches[2].awayPlayer},domProps:{value:a.firstName}},[e._v(" "+e._s(a.firstName)+" ")])}))],2)])]),e._l(5,(function(a){return t("div",{key:`dbl-game-${a}`,staticClass:"game-cell"},[t("div",{staticClass:"game-score-inputs"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.teamMatch.matches[2].games[a-1].home,expression:"teamMatch.matches[2].games[gameIndex - 1].home"}],staticClass:"score-input",attrs:{type:"number",min:"0",max:"99"},domProps:{value:e.teamMatch.matches[2].games[a-1].home},on:{input:[function(t){t.target.composing||e.$set(e.teamMatch.matches[2].games[a-1],"home",t.target.value)},function(t){return e.updateMatchScore(2)}]}}),t("span",{staticClass:"score-separator"},[e._v("-")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.teamMatch.matches[2].games[a-1].away,expression:"teamMatch.matches[2].games[gameIndex - 1].away"}],staticClass:"score-input",attrs:{type:"number",min:"0",max:"99"},domProps:{value:e.teamMatch.matches[2].games[a-1].away},on:{input:[function(t){t.target.composing||e.$set(e.teamMatch.matches[2].games[a-1],"away",t.target.value)},function(t){return e.updateMatchScore(2)}]}})])])})),t("div",{staticClass:"score-cell match-score"},[e._v(" "+e._s(e.teamMatch.matches[2].homeScore)+"-"+e._s(e.teamMatch.matches[2].awayScore)+" ")]),t("div",{staticClass:"team-score-cell"},[e.cumulativeScores[2]&&e.cumulativeScores[2].completed?t("div",{staticClass:"team-points-display"},[e._v(" "+e._s(e.cumulativeScores[2].home)+" "),t("span",{staticClass:"score-separator"},[e._v("-")]),e._v(" "+e._s(e.cumulativeScores[2].away)+" ")]):t("div",{staticClass:"team-points-display"},[e._v("-")])])],2),t("div",{staticClass:"form-row match-row"},[t("div",{staticClass:"match-cell"},[e._v("S3")]),t("div",{staticClass:"player-cell"},[t("select",{directives:[{name:"model",rawName:"v-model",value:e.teamMatch.matches[3].homePlayer,expression:"teamMatch.matches[3].homePlayer"}],staticClass:"player-select",on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.teamMatch.matches[3],"homePlayer",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:""}},[e._v("-- Select player --")]),e._l(e.homeTeamPlayers,(function(a,s){return t("option",{key:`home-s3-${s}-${a.firstName||s}`,domProps:{value:a.firstName}},[e._v(" "+e._s(a.firstName)+" ")])}))],2)]),t("div",{staticClass:"player-cell"},[t("select",{directives:[{name:"model",rawName:"v-model",value:e.teamMatch.matches[3].awayPlayer,expression:"teamMatch.matches[3].awayPlayer"}],staticClass:"player-select",on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.teamMatch.matches[3],"awayPlayer",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:""}},[e._v("-- Select player --")]),e._l(e.awayTeamPlayers,(function(a,s){return t("option",{key:`away-s3-${s}-${a.firstName||s}`,domProps:{value:a.firstName}},[e._v(" "+e._s(a.firstName)+" ")])}))],2)]),e._l(5,(function(a){return t("div",{key:`s3-game-${a}`,staticClass:"game-cell"},[t("div",{staticClass:"game-score-inputs"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.teamMatch.matches[3].games[a-1].home,expression:"teamMatch.matches[3].games[gameIndex - 1].home"}],staticClass:"score-input",attrs:{type:"number",min:"0",max:"99"},domProps:{value:e.teamMatch.matches[3].games[a-1].home},on:{input:[function(t){t.target.composing||e.$set(e.teamMatch.matches[3].games[a-1],"home",t.target.value)},function(t){return e.updateMatchScore(3)}]}}),t("span",{staticClass:"score-separator"},[e._v("-")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.teamMatch.matches[3].games[a-1].away,expression:"teamMatch.matches[3].games[gameIndex - 1].away"}],staticClass:"score-input",attrs:{type:"number",min:"0",max:"99"},domProps:{value:e.teamMatch.matches[3].games[a-1].away},on:{input:[function(t){t.target.composing||e.$set(e.teamMatch.matches[3].games[a-1],"away",t.target.value)},function(t){return e.updateMatchScore(3)}]}})])])})),t("div",{staticClass:"score-cell match-score"},[e._v(" "+e._s(e.teamMatch.matches[3].homeScore)+"-"+e._s(e.teamMatch.matches[3].awayScore)+" ")]),t("div",{staticClass:"team-score-cell"},[e.cumulativeScores[3]&&e.cumulativeScores[3].completed?t("div",{staticClass:"team-points-display"},[e._v(" "+e._s(e.cumulativeScores[3].home)+" "),t("span",{staticClass:"score-separator"},[e._v("-")]),e._v(" "+e._s(e.cumulativeScores[3].away)+" ")]):t("div",{staticClass:"team-points-display"},[e._v("-")])])],2),t("div",{staticClass:"form-row match-row"},[t("div",{staticClass:"match-cell"},[e._v("S4")]),t("div",{staticClass:"player-cell"},[t("select",{directives:[{name:"model",rawName:"v-model",value:e.teamMatch.matches[4].homePlayer,expression:"teamMatch.matches[4].homePlayer"}],staticClass:"player-select",on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.teamMatch.matches[4],"homePlayer",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:""}},[e._v("-- Select player --")]),e._l(e.homeTeamPlayers,(function(a,s){return t("option",{key:`home-s4-${s}-${a.firstName||s}`,domProps:{value:a.firstName}},[e._v(" "+e._s(a.firstName)+" ")])}))],2)]),t("div",{staticClass:"player-cell"},[t("select",{directives:[{name:"model",rawName:"v-model",value:e.teamMatch.matches[4].awayPlayer,expression:"teamMatch.matches[4].awayPlayer"}],staticClass:"player-select",on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.teamMatch.matches[4],"awayPlayer",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:""}},[e._v("-- Select player --")]),e._l(e.awayTeamPlayers,(function(a,s){return t("option",{key:`away-s4-${s}-${a.firstName||s}`,domProps:{value:a.firstName}},[e._v(" "+e._s(a.firstName)+" ")])}))],2)]),e._l(5,(function(a){return t("div",{key:`s4-game-${a}`,staticClass:"game-cell"},[t("div",{staticClass:"game-score-inputs"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.teamMatch.matches[4].games[a-1].home,expression:"teamMatch.matches[4].games[gameIndex - 1].home"}],staticClass:"score-input",attrs:{type:"number",min:"0",max:"99"},domProps:{value:e.teamMatch.matches[4].games[a-1].home},on:{input:[function(t){t.target.composing||e.$set(e.teamMatch.matches[4].games[a-1],"home",t.target.value)},function(t){return e.updateMatchScore(4)}]}}),t("span",{staticClass:"score-separator"},[e._v("-")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.teamMatch.matches[4].games[a-1].away,expression:"teamMatch.matches[4].games[gameIndex - 1].away"}],staticClass:"score-input",attrs:{type:"number",min:"0",max:"99"},domProps:{value:e.teamMatch.matches[4].games[a-1].away},on:{input:[function(t){t.target.composing||e.$set(e.teamMatch.matches[4].games[a-1],"away",t.target.value)},function(t){return e.updateMatchScore(4)}]}})])])})),t("div",{staticClass:"score-cell match-score"},[e._v(" "+e._s(e.teamMatch.matches[4].homeScore)+"-"+e._s(e.teamMatch.matches[4].awayScore)+" ")]),t("div",{staticClass:"team-score-cell"},[e.cumulativeScores[4]&&e.cumulativeScores[4].completed?t("div",{staticClass:"team-points-display"},[e._v(" "+e._s(e.cumulativeScores[4].home)+" "),t("span",{staticClass:"score-separator"},[e._v("-")]),e._v(" "+e._s(e.cumulativeScores[4].away)+" ")]):t("div",{staticClass:"team-points-display"},[e._v("-")])])],2),t("div",{staticClass:"form-row total-row"},[t("div",{staticClass:"match-cell"},[e._v("Total")]),t("div",{staticClass:"player-cell"}),t("div",{staticClass:"player-cell"}),t("div",{staticClass:"game-cell"}),t("div",{staticClass:"game-cell"}),t("div",{staticClass:"game-cell"}),t("div",{staticClass:"game-cell"}),t("div",{staticClass:"game-cell"}),t("div",{staticClass:"score-cell"}),t("div",{staticClass:"team-score-cell total-score"},[t("div",{staticClass:"total-score-display"},[t("span",{staticClass:"home-total"},[e._v(e._s(e.totalScores.home))]),t("span",{staticClass:"score-separator"},[e._v("-")]),t("span",{staticClass:"away-total"},[e._v(e._s(e.totalScores.away))])])])])]),e.validationError?t("div",{staticClass:"error-message"},[e._v(" "+e._s(e.validationError)+" ")]):e._e()]),t("div",{staticClass:"modal-footer"},[t("button",{staticClass:"btn save-btn",on:{click:e.saveTeamMatchResult}},[e._v(" Save Results ")]),t("button",{staticClass:"btn cancel-btn",on:{click:e.cancelAndClose}},[e._v("Cancel")])])])]):e._e()])},ie=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"form-row header-row"},[t("div",{staticClass:"match-cell"},[e._v("Match")]),t("div",{staticClass:"player-cell"},[e._v("Home Player")]),t("div",{staticClass:"player-cell"},[e._v("Away Player")]),t("div",{staticClass:"game-cell"},[e._v("Game 1")]),t("div",{staticClass:"game-cell"},[e._v("Game 2")]),t("div",{staticClass:"game-cell"},[e._v("Game 3")]),t("div",{staticClass:"game-cell"},[e._v("Game 4")]),t("div",{staticClass:"game-cell"},[e._v("Game 5")]),t("div",{staticClass:"score-cell"},[e._v("Match score")]),t("div",{staticClass:"team-score-cell"},[e._v("Team score")])])}],ne={name:"TeamMatchResultForm",props:{showResultModal:{type:Boolean,default:!1},matchData:{type:Object,default:()=>({id:"",homeTeam:"",awayTeam:"",date:new Date,time:"",location:"",groupId:"",phase:"qualification"})},teams:{type:Array,default:()=>[]}},data(){return{validationError:"",teamMatch:{homeTeam:"",awayTeam:"",homeTeamScore:0,awayTeamScore:0,cumulativeHomeScore:0,cumulativeAwayScore:0,matches:[{matchId:"S1",type:"singles",homePlayer:"",awayPlayer:"",games:[{home:null,away:null},{home:null,away:null},{home:null,away:null},{home:null,away:null},{home:null,away:null}],homeScore:0,awayScore:0,teamPoints:{home:0,away:0},orderIndex:0},{matchId:"S2",type:"singles",homePlayer:"",awayPlayer:"",games:[{home:null,away:null},{home:null,away:null},{home:null,away:null},{home:null,away:null},{home:null,away:null}],homeScore:0,awayScore:0,teamPoints:{home:0,away:0},orderIndex:1},{matchId:"Dbl",type:"doubles",homePlayer:"",homePartner:"",awayPlayer:"",awayPartner:"",games:[{home:null,away:null},{home:null,away:null},{home:null,away:null},{home:null,away:null},{home:null,away:null}],homeScore:0,awayScore:0,teamPoints:{home:0,away:0},orderIndex:2},{matchId:"S3",type:"singles",homePlayer:"",awayPlayer:"",games:[{home:null,away:null},{home:null,away:null},{home:null,away:null},{home:null,away:null},{home:null,away:null}],homeScore:0,awayScore:0,teamPoints:{home:0,away:0},orderIndex:3},{matchId:"S4",type:"singles",homePlayer:"",awayPlayer:"",games:[{home:null,away:null},{home:null,away:null},{home:null,away:null},{home:null,away:null},{home:null,away:null}],homeScore:0,awayScore:0,teamPoints:{home:0,away:0},orderIndex:4}]}}},computed:{homeTeamPlayers(){const e=this.teams.find((e=>e.name===this.matchData.homeTeam));return e?.members||[]},awayTeamPlayers(){const e=this.teams.find((e=>e.name===this.matchData.awayTeam));return e?.members||[]},totalScores(){let e=0,t=0;return this.teamMatch.matches.forEach((a=>{e+=parseInt(a.teamPoints.home)||0,t+=parseInt(a.teamPoints.away)||0})),{home:e,away:t}},cumulativeScores(){let e=[],t=0,a=0;const s=["S1","S2","Dbl","S3","S4"];for(const o of s){const s=this.teamMatch.matches.find((e=>e.matchId===o));s&&((s.homeScore>=3||s.awayScore>=3)&&(t+=parseInt(s.teamPoints.home)||0,a+=parseInt(s.teamPoints.away)||0),e.push({matchId:s.matchId,home:t,away:a,completed:s.homeScore>=3||s.awayScore>=3}))}return e}},watch:{showResultModal(e){e&&(console.log("MatchResultForm modal opened with data:",this.matchData),this.initializeForm())},matchData:{handler(e){console.log("matchData changed:",e),this.showResultModal&&(console.log("Reinitializing form due to matchData change"),this.initializeForm())},deep:!0}},methods:{formatDate(e){if(!e)return"";const t=new Date(e);return t.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})},initializeForm(){this.validationError="",this.teamMatch.homeTeam=this.matchData.homeTeam,this.teamMatch.awayTeam=this.matchData.awayTeam,this.matchData.teamMatches&&this.matchData.teamMatches.length>0?this.loadExistingTeamMatch():this.resetTeamMatch(),this.updateTotalTeamScore()},resetTeamMatch(){for(let e=0;e<this.teamMatch.matches.length;e++){const t=2===e?"doubles":"singles",a=2===e?"Dbl":`S${e<2?e+1:e}`;this.teamMatch.matches[e]={matchId:a,type:t,homePlayer:"",awayPlayer:"",homePartner:2===e?"":void 0,awayPartner:2===e?"":void 0,games:[{home:null,away:null},{home:null,away:null},{home:null,away:null},{home:null,away:null},{home:null,away:null}],homeScore:0,awayScore:0,teamPoints:{home:0,away:0},orderIndex:e}}},loadExistingTeamMatch(){if(console.log("Loading existing team match data",this.matchData.teamMatches),!this.matchData.teamMatches||!Array.isArray(this.matchData.teamMatches))return void console.error("No valid team matches data to load");this.resetTeamMatch();const e=["S1","S2","Dbl","S3","S4"],t={};e.forEach(((e,a)=>{t[e]=a})),this.matchData.teamMatches.forEach((e=>{if(!e.matchId)return;const a=t[e.matchId];if(void 0===a)return void console.warn(`Unrecognized match ID: ${e.matchId}`);const s=this.teamMatch.matches[a];if(s.homePlayer=e.homePlayer||"",s.awayPlayer=e.awayPlayer||"","Dbl"===e.matchId&&(s.homePartner=e.homePartner||"",s.awayPartner=e.awayPartner||""),e.games&&Array.isArray(e.games))for(let t=0;t<Math.min(s.games.length,e.games.length);t++)s.games[t].home=e.games[t].home,s.games[t].away=e.games[t].away;s.homeScore=e.homeScore||0,s.awayScore=e.awayScore||0,e.teamPoints&&(s.teamPoints.home=e.teamPoints.home||0,s.teamPoints.away=e.teamPoints.away||0)}));for(let a=0;a<this.teamMatch.matches.length;a++)this.updateMatchScore(a);this.teamMatch.homeTeam=this.matchData.homeTeam,this.teamMatch.awayTeam=this.matchData.awayTeam,this.teamMatch.homeTeamScore=this.matchData.homeTeamScore||0,this.teamMatch.awayTeamScore=this.matchData.awayTeamScore||0,this.$forceUpdate(),console.log("Loaded existing team match data",this.teamMatch.matches)},updateMatchScore(e){const t=this.teamMatch.matches[e];let a=0,s=0;t.games.forEach((e=>{if(!e.home&&!e.away)return;const t=parseInt(e.home)||0,o=parseInt(e.away)||0;t>o?a++:o>t&&s++})),t.homeScore=a,t.awayScore=s,a>=3?(t.teamPoints.home=1,t.teamPoints.away=0):s>=3?(t.teamPoints.home=0,t.teamPoints.away=1):(t.teamPoints.home=0,t.teamPoints.away=0),a>3&&(t.homeScore=3),s>3&&(t.awayScore=3),this.$forceUpdate()},updateTotalTeamScore(){},calculateTotalTeamScore(e){let t=0;for(const a of this.teamMatch.matches)t+=parseInt(a.teamPoints[e])||0;return t},validateForm(){this.validationError="";let e=!1;for(const t of this.teamMatch.matches){const a=t.homePlayer&&t.awayPlayer;if("doubles"===t.type&&(!t.homePartner||!t.awayPartner))continue;if(!a)continue;const s=t.games.some((e=>null!==e.home&&null!==e.away&&""!==e.home&&""!==e.away));if(s){e=!0;break}}return!!e||(this.validationError="At least one match must have players selected and game scores entered",!1)},saveTeamMatchResult(){if(!this.validateForm())return;const e=this.teamMatch.matches.filter((e=>{const t=e.homePlayer&&e.awayPlayer;return!!("doubles"!==e.type||e.homePartner&&e.awayPartner)&&(!!t&&e.games.some((e=>null!==e.home&&null!==e.away&&""!==e.home&&""!==e.away)))})),t=e.map((e=>{const t=e.games.filter((e=>null!==e.home&&null!==e.away&&""!==e.home&&""!==e.away));return{matchId:e.matchId,type:e.type,homePlayer:e.homePlayer,awayPlayer:e.awayPlayer,homePartner:"doubles"===e.type?e.homePartner:void 0,awayPartner:"doubles"===e.type?e.awayPartner:void 0,games:t,homeScore:e.homeScore,awayScore:e.awayScore,teamPoints:e.teamPoints}})),a={homeTeam:this.teamMatch.homeTeam,awayTeam:this.teamMatch.awayTeam,homeTeamScore:this.calculateTotalTeamScore("home"),awayTeamScore:this.calculateTotalTeamScore("away"),teamMatches:t,isCompleted:!0,completedDate:new Date};this.$emit("save-result",{matchId:this.matchData.id,resultData:a}),this.$emit("close")},cancelAndClose(){this.$emit("close")}}},re=ne,le=(0,C.A)(re,oe,ie,!1,null,"1132c9c4",null),ce=le.exports,me={name:"UpcomingMatches",components:{MatchResultForm:ce},props:{isAdmin:{type:Boolean,default:!1},phase:{type:String,default:"division",validator:e=>["qualification","division"].includes(e)}},setup(e){const t=e=>{const t=new Date(e.getFullYear(),0,1),a=(e-t)/864e5;return Math.ceil((a+t.getDay()+1)/7)},a=(0,s.KR)([]),o=(0,s.KR)([]),i=(0,s.KR)([]),n=(0,s.KR)(!0),r=(0,s.KR)(null),l=(0,s.KR)(null),c=(0,s.KR)(""),m=(0,s.KR)(!1),d=(0,s.KR)(!1),u=(0,s.KR)(!1),p=(0,s.KR)(!1),v=(0,s.KR)(!1),h=(0,s.KR)(!1),g=(0,s.KR)(16),f=(0,s.KR)(!1),y=(0,s.KR)([]),_=(0,s.Kh)({homeTeam:"",awayTeam:"",dateString:"",time:"",groupId:"",phase:e.phase,location:""}),w=(0,s.Kh)({id:"",homeTeam:"",awayTeam:"",date:null,dateString:"",time:"",homeTeamScore:0,awayTeamScore:0,groupId:"",location:"",teamMatches:[]}),b=(0,s.Kh)({id:"",homeTeam:"",awayTeam:"",date:null}),C=(0,s.Kh)({groupId:"",startDate:(new Date).toISOString().split("T")[0],endDate:new Date(Date.now()+2592e6).toISOString().split("T")[0],matchDays:{monday:!0,wednesday:!0},matchTimes:{"20:00":!0,"21:00":!0},location:"TBTK Hall",respectPreferences:!0,limitOneMatchPerTeamPerWeek:!0,homeAwayStrategy:"alternate"}),T=e=>{const t=new Date(e);return t.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})},M=e=>{const t=new Date(e);return t.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"})},P=(0,s.EW)((()=>{const t=new Date;t.setHours(0,0,0,0);let s=a.value.filter((a=>a.phase===e.phase&&!a.isCompleted&&new Date(a.date)>=t));return c.value&&(s=s.filter((e=>e.groupId===c.value))),s})),S=(0,s.EW)((()=>_.groupId?"qualification"===e.phase?o.value.filter((e=>e.groupId===_.groupId)):o.value.filter((e=>e.divisionId===_.groupId)):[])),D=(0,s.EW)((()=>w.groupId?"qualification"===e.phase?o.value.filter((e=>e.groupId===w.groupId)):o.value.filter((e=>e.divisionId===w.groupId)):[])),A=(0,s.EW)((()=>{const e=[],t={},a=[...P.value].sort(((e,t)=>{const a=new Date(e.date),s=new Date(t.date);return a-s}));return a.forEach((a=>{const s=new Date(a.date),o=s.toISOString().split("T")[0];t[o]||(t[o]={date:s,matches:[]},e.push(t[o])),t[o].matches.push(a)})),e.forEach((e=>{e.matches.sort(((e,t)=>{const a=e.time?e.time.replace(":",""):"9999",s=t.time?t.time.replace(":",""):"9999";return a.localeCompare(s)}))})),e})),I=()=>{if(y.value=[],!C.startDate)return;const e=new Date(C.startDate),t=C.endDate?new Date(C.endDate):new Date(e.getTime()+5184e6),a=[];if(C.matchDays.monday&&a.push(1),C.matchDays.wednesday&&a.push(3),0===a.length)return;let s=new Date(e);while(s<=t)a.includes(s.getDay())&&y.value.push({date:new Date(s),selected:!0}),s.setDate(s.getDate()+1)},x=async()=>{try{n.value=!0,console.log(`Loading matches data for ${e.phase} phase`);try{const e=await(0,N.x7)((0,N.H9)(R,"settings","tournament"));e.exists()&&(g.value=e.data().maxTables||16,console.log(`Loaded max tables setting: ${g.value}`))}catch(r){console.error("Error loading tournament settings:",r)}let t;t="qualification"===e.phase?(0,N.P)((0,N.rJ)(R,"groups"),(0,N._M)("phase","in",["qualification",null])):(0,N.P)((0,N.rJ)(R,"groups"),(0,N._M)("phase","==","division"));let s=(0,N.P)((0,N.rJ)(R,"matches"),(0,N._M)("phase","==",e.phase));const[c,m,d]=await Promise.all([(0,N.GG)(t),(0,N.GG)((0,N.rJ)(R,"teams")),(0,N.GG)(s)]);if(console.log(`Found ${c.size} groups for ${e.phase} phase`),0===c.size){const t=(0,N.P)((0,N.rJ)(R,"groups"),"qualification"===e.phase?(0,N._M)("type","==","qualification"):(0,N._M)("type","in",["division1","division2","division3","division4"])),a=await(0,N.GG)(t);console.log(`Fallback query found ${a.size} groups`),i.value=[],a.forEach((t=>{i.value.push({id:t.id,...t.data(),phase:e.phase})}))}else i.value=[],c.forEach((e=>{i.value.push({id:e.id,...e.data()})}));if(o.value=[],m.forEach((e=>{o.value.push({id:e.id,...e.data()})})),console.log(`Loaded ${o.value.length} teams`),0===d.size){console.log("No matches found with phase field, trying groupType...");const t=(0,N.P)((0,N.rJ)(R,"matches"),(0,N._M)("groupType","==",e.phase)),s=await(0,N.GG)(t);console.log(`Found ${s.size} matches with groupType=${e.phase}`),a.value=[],s.forEach((t=>{const s=t.data(),o=s.homeTeam||s.player1,i=s.awayTeam||s.player2,n=s.date?.toDate?s.date.toDate():new Date(s.date);a.value.push({id:t.id,...s,homeTeam:o,awayTeam:i,date:n,phase:e.phase})}))}else a.value=[],d.forEach((e=>{const t=e.data(),s=t.homeTeam||t.player1,o=t.awayTeam||t.player2,i=t.date?.toDate?t.date.toDate():new Date(t.date);a.value.push({id:e.id,...t,homeTeam:s,awayTeam:o,date:i})}));console.log(`Loaded ${a.value.length} total matches`),console.log(`Filtered matches: ${P.value.length}`),l.value=(new Date).toLocaleString(),n.value=!1}catch(t){console.error("Error loading matches:",t),r.value="Failed to load matches. Please try again later.",n.value=!1}},k=async()=>{if(_.homeTeam&&_.awayTeam&&_.dateString&&_.groupId)if(_.homeTeam!==_.awayTeam)try{const t=new Date(_.dateString),a=i.value.find((e=>e.id===_.groupId)),s=a?a.name:"";await(0,N.gS)((0,N.rJ)(R,"matches"),{homeTeam:_.homeTeam,awayTeam:_.awayTeam,date:N.Dc.fromDate(t),time:_.time||"",groupId:_.groupId,phase:e.phase,groupType:e.phase,groupName:s,location:_.location||"",isCompleted:!1,createdAt:(0,N.O5)()}),_.homeTeam="",_.awayTeam="",_.dateString="",_.time="",_.groupId="",_.location="",await x(),p.value=!1,alert("Match scheduled successfully!")}catch(r){console.error("Error scheduling match:",r),alert("Failed to schedule match. Please try again.")}else alert("Home Team and Away Team cannot be the same");else alert("Please fill in all required fields")},$=()=>{f.value=!0},G=async()=>{try{n.value=!0;const t=(0,N.P)((0,N.rJ)(R,"matches"),(0,N._M)("phase","==",e.phase)),a=await(0,N.GG)(t);if(a.empty)return alert(`No ${e.phase} matches found to delete.`),f.value=!1,void(n.value=!1);const s=(0,N.wP)(R);let o=0;a.forEach((e=>{s.delete(e.ref),o++})),await s.commit(),await x(),f.value=!1,alert(`Successfully deleted ${o} ${e.phase} matches.`)}catch(r){console.error(`Error deleting ${e.phase} matches:`,r),alert(`Failed to delete matches. Error: ${r.message}`)}finally{n.value=!1}},E=e=>{const t=new Date(e.date);w.id=e.id,w.homeTeam=e.homeTeam||e.player1,w.awayTeam=e.awayTeam||e.player2,w.date=t,w.dateString=t.toISOString().split("T")[0],w.time=e.time||"",w.groupId=e.groupId||"",w.location=e.location||"",m.value=!0},q=e=>{const t=new Date(e.date);w.id=e.id,w.homeTeam=e.homeTeam||e.player1,w.awayTeam=e.awayTeam||e.player2,w.date=t,w.dateString=t.toISOString().split("T")[0],w.time=e.time||"",w.homeTeamScore=e.homeTeamScore||0,w.awayTeamScore=e.awayTeamScore||0,w.groupId=e.groupId||"",w.location=e.location||"",e.teamMatches&&(w.teamMatches=e.teamMatches),u.value=!0},O=async()=>{if(w.homeTeam&&w.awayTeam&&w.dateString&&w.groupId)if(w.homeTeam!==w.awayTeam)try{const t=(0,N.H9)(R,"matches",w.id),a=new Date(w.dateString),s=i.value.find((e=>e.id===w.groupId)),o=s?s.name:"";await(0,N.mZ)(t,{homeTeam:w.homeTeam,awayTeam:w.awayTeam,player1:w.homeTeam,player2:w.awayTeam,date:a,time:w.time,groupId:w.groupId,phase:e.phase,groupType:e.phase,groupName:o,location:w.location,updatedAt:(0,N.O5)()}),await x(),m.value=!1}catch(r){console.error("Error updating match:",r),alert("Failed to update match. Please try again.")}else alert("Home Team and Away Team cannot be the same");else alert("Please fill in all required fields")},F=async e=>{try{if(console.log("Received result data:",e),!e||!e.matchId)return console.error("Missing match ID in result data"),void alert("Missing match ID. Cannot save results.");const t=e.matchId,a=e.resultData;if(!a)return console.error("Missing result data"),void alert("Missing result data. Cannot save results.");console.log("Processing match ID:",t),console.log("Result data:",a);const s=(0,N.H9)(R,"matches",t),o={homeTeamScore:a.homeTeamScore||0,awayTeamScore:a.awayTeamScore||0,isCompleted:!0,completedDate:a.completedDate?N.Dc.fromDate(new Date(a.completedDate)):N.Dc.fromDate(new Date)};a.teamMatches&&Array.isArray(a.teamMatches)&&(o.teamMatches=JSON.parse(JSON.stringify(a.teamMatches)),console.log("Saving team matches:",o.teamMatches)),console.log("Final update data:",o),await(0,N.mZ)(s,o),console.log("Match updated successfully"),await K(a),console.log("Team statistics updated"),await x(),u.value=!1,alert("Match results saved successfully!")}catch(r){console.error("Error saving match results:",r),alert(`Failed to save match results: ${r.message}`)}},K=async e=>{try{console.log("Updating team statistics with result:",e);const t=o.value.find((e=>e.name===w.homeTeam)),a=o.value.find((e=>e.name===w.awayTeam));if(!t||!a)throw console.error("Could not find teams to update statistics"),console.log("Home team name:",w.homeTeam),console.log("Away team name:",w.awayTeam),console.log("Available teams:",o.value.map((e=>e.name))),new Error("Teams not found in the database");console.log("Found teams:",t.name,a.name);const s=(0,N.H9)(R,"teams",t.id),n=(0,N.H9)(R,"teams",a.id),r=i.value.find((e=>e.id===w.groupId)),l=r?.pointsForWin||3,c=r?.pointsForDraw||1;console.log("Group settings:",{groupId:w.groupId,pointsForWin:l,pointsForDraw:c});const m=parseInt(e.homeTeamScore)||0,d=parseInt(e.awayTeamScore)||0,u=m>d,p=d>m,v=m===d;console.log("Match outcome:",{homeTeamScore:m,awayTeamScore:d,homeWins:u,awayWins:p,isDraw:v});let h=0,g=0,f=0;e.teamMatches&&Array.isArray(e.teamMatches)&&e.teamMatches.length>0?(console.log("Processing team matches:",e.teamMatches.length),e.teamMatches.forEach((e=>{e&&(e.teamPoints?(h+=parseInt(e.teamPoints.home||0),g+=parseInt(e.teamPoints.away||0)):(h+=e.homeScore>e.awayScore?1:0,g+=e.awayScore>e.homeScore?1:0),e.homePlayer&&e.awayPlayer&&f++)}))):(console.log("No team matches found or invalid format"),f=1,h=u?1:0,g=p?1:0),console.log("Game statistics:",{homeGamesWon:h,awayGamesWon:g,totalGamesPlayed:f});const y={played:(t.played||0)+1,won:(t.won||0)+(u?1:0),drawn:(t.drawn||0)+(v?1:0),lost:(t.lost||0)+(p?1:0),points:(t.points||0)+(u?l:v?c:0),gamesPlayed:(t.gamesPlayed||0)+f,gamesWon:(t.gamesWon||0)+h};console.log("Updating home team with:",y),await(0,N.mZ)(s,y);const _={played:(a.played||0)+1,won:(a.won||0)+(p?1:0),drawn:(a.drawn||0)+(v?1:0),lost:(a.lost||0)+(u?1:0),points:(a.points||0)+(p?l:v?c:0),gamesPlayed:(a.gamesPlayed||0)+f,gamesWon:(a.gamesWon||0)+g};console.log("Updating away team with:",_),await(0,N.mZ)(n,_),console.log("Team statistics updated successfully")}catch(r){throw console.error("Error updating team statistics:",r),r}},L=e=>{b.id=e.id,b.homeTeam=e.homeTeam||e.player1,b.awayTeam=e.awayTeam||e.player2,b.date=e.date,d.value=!0},H=async()=>{try{await(0,N.kd)((0,N.H9)(R,"matches",b.id)),await x(),d.value=!1}catch(r){console.error("Error deleting match:",r),alert("Failed to delete match. Please try again.")}},W=(e,t)=>{const a=[];for(let s=0;s<e.length;s++)for(let o=s+1;o<e.length;o++){let i,n;"random"===C.homeAwayStrategy?Math.random()>.5?(i=e[s],n=e[o]):(i=e[o],n=e[s]):(i=e[s],n=e[o]),a.push({homeTeam:i,awayTeam:n,group:t})}return a},B=e=>{const a=[...e],s=[];C.matchTimes["20:00"]&&s.push("20:00"),C.matchTimes["21:00"]&&s.push("21:00");const o=y.value.filter((e=>e.selected)).map((e=>e.date));if(0===o.length)throw new Error("No match days selected. Please select at least one date.");const i={},n={},r={},l={},c={},m=Math.floor(g.value/2);console.log(`Max matches per timeslot: ${m} (${g.value} tables = ${m} table pairs)`);const d=(e,t)=>{let a=[1,3];return C.respectPreferences&&("Monday Only"===e.preferredDay?a=[1]:"Wednesday Only"===e.preferredDay&&(a=[3]),"Monday Only"===t.preferredDay?a=a.filter((e=>1===e)):"Wednesday Only"===t.preferredDay&&(a=a.filter((e=>3===e)))),a},u={};o.forEach((e=>{const a=e,s=t(a),o=a.getFullYear(),i=`${o}-${s}`;u[i]||(u[i]={monday:null,wednesday:null,dates:[]}),1===a.getDay()?u[i].monday=a:3===a.getDay()&&(u[i].wednesday=a),u[i].dates.push(a)}));for(let p=0;p<a.length;p++){const e=a[p],o=d(e.homeTeam,e.awayTeam);let v=!1;const h=Object.values(u);h.sort(((e,t)=>new Date(e.dates[0])-new Date(t.dates[0])));for(const a of h){const d=Object.keys(u).find((e=>u[e]===a)),p=n[e.homeTeam.name]?.has(d),h=n[e.awayTeam.name]?.has(d);if(p||h)continue;r[d]||(r[d]={monday:0,wednesday:0});const g=1===o.length;let f=[];if(g)o.includes(1)&&a.monday&&f.push(a.monday),o.includes(3)&&a.wednesday&&f.push(a.wednesday);else{let e=r[d].monday,t=r[d].wednesday;a.monday&&a.wednesday?f=e<=t?[a.monday,a.wednesday]:[a.wednesday,a.monday]:a.monday?f=[a.monday]:a.wednesday&&(f=[a.wednesday])}for(const a of f){if(!y.value.find((e=>e.selected&&e.date.toISOString().split("T")[0]===new Date(a).toISOString().split("T")[0])))continue;const o=new Date(a),d=o.toISOString().split("T")[0];for(const u of s){const s=`${d}_${u}`;if(l[s]||(l[s]=0),l[s]<m){c[s]||(c[s]=new Set);let p=0;while(c[s].has(p)&&p<m)p++;if(p<m){const m=2*p+1,h=m+1;e.date=new Date(a),e.time=u,e.location=`${m} & ${h}`,c[s].add(p),l[s]||(l[s]=0),l[s]++;const g=t(o),f=o.getFullYear(),y=`${f}-${g}`;i[e.homeTeam.name]||(i[e.homeTeam.name]=[]),i[e.awayTeam.name]||(i[e.awayTeam.name]=[]),n[e.homeTeam.name]||(n[e.homeTeam.name]=new Set),n[e.awayTeam.name]||(n[e.awayTeam.name]=new Set),i[e.homeTeam.name].push(d),i[e.awayTeam.name].push(d),n[e.homeTeam.name].add(y),n[e.awayTeam.name].add(y),v=!0,1===o.getDay()?(r[y]||(r[y]={monday:0,wednesday:0}),r[y].monday+=1):3===o.getDay()&&(r[y]||(r[y]={monday:0,wednesday:0}),r[y].wednesday+=1);break}}else;}if(v)break}if(v)break}v||(e.date=null,e.time="SCHEDULING CONFLICT",e.location="Unable to schedule - no available slot",console.warn(`Could not schedule match between ${e.homeTeam.name} and ${e.awayTeam.name}`))}return a},U=async()=>{if(!C.groupId)return void alert("Please select a group/division");if(!C.startDate)return void alert("Please select a start date");if(!C.matchDays.monday&&!C.matchDays.wednesday)return void alert("Please select at least one match day");if(!C.matchTimes["20:00"]&&!C.matchTimes["21:00"])return void alert("Please select at least one match time");const t=y.value.filter((e=>e.selected));if(0!==t.length)try{h.value=!0,console.log("Starting match generation...");let t=[];if("all"===C.groupId)console.log(`Getting all groups for phase: ${e.phase}`),t=[...i.value];else{const e=i.value.find((e=>e.id===C.groupId));if(!e)throw new Error("Selected group not found");t.push(e)}console.log(`Processing ${t.length} groups`);let a=0,s=0;for(const i of t){console.log(`Generating matches for group: ${i.name}`);let t=[];if(t="qualification"===e.phase?o.value.filter((e=>e.groupId===i.id)):o.value.filter((e=>e.divisionId===i.id)),console.log(`Found ${t.length} teams in group ${i.name}`),t.length<2){console.log(`Skipping group ${i.name}: not enough teams`);continue}const n=W(t,i);console.log(`Generated ${n.length} match pairings`);const r=B(n),l=r.filter((e=>null===e.date)).length;s+=l,l>0&&console.warn(`${l} matches could not be scheduled for group ${i.name}`);const c=r.filter((e=>null!==e.date)).map((t=>(0,N.gS)((0,N.rJ)(R,"matches"),{homeTeam:t.homeTeam.name,awayTeam:t.awayTeam.name,player1:t.homeTeam.name,player2:t.awayTeam.name,date:t.date,time:t.time,groupId:i.id,phase:e.phase,groupType:e.phase,groupName:i.name,location:t.location||C.location,isCompleted:!1,createdAt:(0,N.O5)()})));await Promise.all(c),a+=r.filter((e=>null!==e.date)).length}s>0?alert(`Generated ${a} matches successfully.\n\nWarning: ${s} matches could not be scheduled due to constraints. You will need to schedule these manually.`):alert(`Successfully generated ${a} matches!`),v.value=!1,await x()}catch(r){console.error("Error generating matches:",r),alert(`Error generating matches: ${r.message}`)}finally{h.value=!1}else alert("Please select at least one specific match date")};return(0,s.sV)((()=>{x()})),(0,s.wB)((()=>e.phase),(e=>{console.log(`Phase changed to: ${e}`),_.phase=e,x()})),(0,s.wB)((()=>v.value),(e=>{e&&I()})),{matches:a,teams:o,groups:i,filteredMatches:P,filteredTeams:S,teamsForEditGroup:D,groupedMatches:A,loading:n,error:r,lastUpdated:l,groupFilter:c,formatDate:T,formatDateHeader:M,showEditModal:m,showDeleteModal:d,showResultModal:u,showScheduleModal:p,showGenerateModal:v,showDeleteAllModal:f,isGenerating:h,maxTables:g,editingMatch:w,matchToDelete:b,newMatch:_,generateSettings:C,potentialMatchDays:y,generatePotentialMatchDays:I,editMatch:E,updateMatch:O,assignResult:q,saveMatchResult:F,scheduleMatch:k,confirmDelete:L,deleteMatch:H,generateMatches:U,confirmDeleteAll:$,deleteAllMatches:G}}},de=me,ue=(0,C.A)(de,ae,se,!1,null,"4571d4b5",null),pe=ue.exports,ve=function(){var e=this,t=e._self._c;return t("div",{staticClass:"results-container"},[t("h2",[e._v(" "+e._s("qualification"===e.phase?"Qualification":"Division")+" Results ")]),e.loading?t("div",{staticClass:"loading-container"},[t("div",{staticClass:"loading-spinner"}),t("p",[e._v("Loading match results...")])]):e.error?t("div",{staticClass:"error-container"},[t("i",{staticClass:"error-icon"},[e._v("!")]),t("p",[e._v(e._s(e.error))])]):t("div",[e.groupedMatches.length>0?t("div",{staticClass:"results-list"},e._l(e.groupedMatches,(function(a,s){return t("div",{key:s,staticClass:"result-group"},[t("div",{staticClass:"date-header"},[t("h3",[e._v(e._s(e.formatDateHeader(a.date)))]),t("span",{staticClass:"match-count"},[e._v(e._s(a.matches.length)+" "+e._s(1===a.matches.length?"match":"matches"))])]),t("div",{staticClass:"result-table"},e._l(a.matches,(function(a){return t("div",{key:a.id,staticClass:"match-result-card"},[t("div",{staticClass:"match-header"},[t("div",{staticClass:"team team-home"},[e._v(e._s(a.homeTeam))]),t("div",{staticClass:"score-column"},[t("div",{staticClass:"main-result"},[t("span",{staticClass:"team-score",class:{winner:a.homeTeamScore>a.awayTeamScore}},[e._v(" "+e._s(a.homeTeamScore)+" ")]),t("span",{staticClass:"score-separator"},[e._v("-")]),t("span",{staticClass:"team-score",class:{winner:a.awayTeamScore>a.homeTeamScore}},[e._v(" "+e._s(a.awayTeamScore)+" ")])])]),t("div",{staticClass:"team team-away"},[e._v(e._s(a.awayTeam))]),t("button",{staticClass:"toggle-details-btn",class:{expanded:e.expandedMatches.includes(a.id)},on:{click:function(t){return e.toggleMatchDetails(a.id)}}},[t("span",{staticClass:"chevron-icon"},[e._v(" "+e._s(e.expandedMatches.includes(a.id)?"▼":"▶")+" ")])])]),a.teamMatches&&a.teamMatches.length>0&&e.expandedMatches.includes(a.id)?t("div",{staticClass:"team-match-details"},[t("div",{staticClass:"match-table"},[t("table",[t("thead",[t("tr",[t("th",{staticClass:"match-col"},[e._v("Match")]),t("th",{staticClass:"player-col"},[e._v(e._s(a.homeTeam))]),t("th",{staticClass:"player-col"},[e._v(e._s(a.awayTeam))]),t("th",{staticClass:"games-col"},[e._v("Games")]),t("th",{staticClass:"result-col"},[e._v("Result")])])]),t("tbody",e._l(a.teamMatches,(function(a,s){return t("tr",{key:s},[t("td",{staticClass:"match-col"},[e._v(" "+e._s(a.matchId||("doubles"===a.type?"Dbl":`S${s+1}`))+" ")]),t("td",{staticClass:"player-col text-right"},[t("div",{staticClass:"player-name"},[e._v(" "+e._s("doubles"===a.type&&a.homePartner?`${a.homePlayer} / ${a.homePartner}`:a.homePlayer)+" ")])]),t("td",{staticClass:"player-col"},[t("div",{staticClass:"player-name"},[e._v(" "+e._s("doubles"===a.type&&a.awayPartner?`${a.awayPlayer} / ${a.awayPartner}`:a.awayPlayer)+" ")])]),t("td",{staticClass:"games-col"},[a.games&&a.games.length>0?t("div",{staticClass:"game-scores"},e._l(a.games.filter((e=>null!==e.home||null!==e.away)),(function(a,s){return t("span",{key:s,staticClass:"game-score",class:{"home-win":Number(a.home)>Number(a.away),"away-win":Number(a.away)>Number(a.home)}},[e._v(" "+e._s(a.home)+" - "+e._s(a.away)+" ")])})),0):e._e()]),t("td",{staticClass:"result-col"},[t("div",{staticClass:"match-points"},[t("span",{class:{"winner-text":a.homeScore>a.awayScore}},[e._v(" "+e._s(a.homeScore)+" ")]),t("span",{staticClass:"score-separator"},[e._v("-")]),t("span",{class:{"winner-text":a.awayScore>a.homeScore}},[e._v(" "+e._s(a.awayScore)+" ")])])])])})),0),e.calculateGameTotals(a)||e.calculatePointTotals(a)?t("tfoot",[t("tr",{staticClass:"totals-row first-totals-row"},[t("td",{staticClass:"total-label"},[e._v("Total")]),t("td",{attrs:{colspan:"2"}}),t("td",{staticClass:"points-total"},[e._v(" "+e._s(e.calculatePointTotals(a).homeTotalPoints)+" - "+e._s(e.calculatePointTotals(a).awayTotalPoints)+" ")]),t("td",{staticClass:"games-value"},[e._v(" "+e._s(e.calculateGameTotals(a).homeTotalGames)+" - "+e._s(e.calculateGameTotals(a).awayTotalGames)+" ")])]),t("tr",{staticClass:"totals-row second-totals-row"},[t("td",{staticClass:"total-label"},[e._v("Sum")]),t("td",{attrs:{colspan:"2"}}),t("td",{staticClass:"total-points"},[e._v(" "+e._s(e.calculatePointTotals(a).homeTotalPoints+e.calculatePointTotals(a).awayTotalPoints)+" ")]),t("td",{staticClass:"total-games"},[e._v(" "+e._s(e.calculateGameTotals(a).homeTotalGames+e.calculateGameTotals(a).awayTotalGames)+" ")])])]):e._e()])])]):e._e(),e.$props.isAdmin?t("div",{staticClass:"admin-actions"},[t("button",{staticClass:"action-btn edit-btn",on:{click:function(t){return e.editMatchResult(a)}}},[e._v(" Edit Result ")]),t("button",{staticClass:"action-btn delete-btn",on:{click:function(t){return e.confirmDelete(a)}}},[e._v(" Delete Result ")])]):e._e()])})),0)])})),0):t("div",{staticClass:"no-results"},[t("p",[e._v(" No "+e._s("qualification"===e.phase?"qualification":"division")+" match results found ")])])]),t("MatchResultForm",{attrs:{showResultModal:e.showResultModal,matchData:e.editingMatch,teams:e.teamsList},on:{"save-result":e.updateMatchResultFromForm,close:function(t){e.showResultModal=!1}}}),e.showDeleteModal?t("div",{staticClass:"modal-overlay"},[t("div",{staticClass:"modal-content"},[t("div",{staticClass:"modal-header"},[t("h3",[e._v("Confirm Delete")]),t("button",{staticClass:"close-btn",on:{click:function(t){e.showDeleteModal=!1}}},[e._v("×")])]),t("div",{staticClass:"modal-body"},[t("p",[e._v("Are you sure you want to delete this match result?")]),t("div",{staticClass:"match-info"},[t("strong",[e._v(e._s(e.matchToDelete.homeTeam)+" 🆚 "+e._s(e.matchToDelete.awayTeam))]),t("br"),t("span",[e._v(e._s(e.formatDate(e.matchToDelete.date)))])]),t("p",{staticClass:"warning"},[e._v("This action cannot be undone.")])]),t("div",{staticClass:"modal-footer"},[t("button",{staticClass:"btn delete-btn",on:{click:e.deleteMatchResult}},[e._v(" Delete ")]),t("button",{staticClass:"btn cancel-btn",on:{click:function(t){e.showDeleteModal=!1}}},[e._v(" Cancel ")])])])]):e._e()],1)},he=[],ge={name:"MatchResults",components:{MatchResultForm:ce},props:{isAdmin:{type:Boolean,default:!1},phase:{type:String,default:"qualification",validator:e=>["qualification","division"].includes(e)}},setup(e){const t=(0,s.KR)([]),a=(0,s.KR)([]),o=(0,s.KR)(!0),i=(0,s.KR)(null),n=(0,s.KR)(null),r=(0,s.KR)([]),l=(0,s.KR)(!1),c=(0,s.KR)(!1),m=(0,s.KR)(!1),d=(0,s.Kh)({id:"",homeTeam:"",awayTeam:"",homeTeamScore:0,awayTeamScore:0,date:null,dateString:"",time:"",location:"",groupId:"",teamMatches:[],phase:e.phase}),u=(0,s.Kh)({id:"",homeTeam:"",awayTeam:"",date:null}),p=e=>{r.value.includes(e)?r.value=r.value.filter((t=>t!==e)):r.value.push(e)},v=e=>{const t=new Date(e);return t.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})},h=e=>{const t=new Date(e);return t.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"}).toUpperCase()},g=e=>{if(!e.teamMatches||!Array.isArray(e.teamMatches)||0===e.teamMatches.length)return null;let t=0,a=0;return e.teamMatches.forEach((e=>{t+=parseInt(e.homeScore)||0,a+=parseInt(e.awayScore)||0})),{homeTotalGames:t,awayTotalGames:a}},f=e=>{if(!e.teamMatches||!Array.isArray(e.teamMatches)||0===e.teamMatches.length)return null;let t=0,a=0;return e.teamMatches.forEach((e=>{e.games&&Array.isArray(e.games)&&e.games.forEach((e=>{null!==e.home&&null!==e.away&&(t+=parseInt(e.home)||0,a+=parseInt(e.away)||0)}))})),{homeTotalPoints:t,awayTotalPoints:a}},y=(0,s.EW)((()=>t.value.filter((t=>t.phase===e.phase&&!0===t.isCompleted)))),_=(0,s.EW)((()=>{const e=[],t={},a=[...y.value].sort(((e,t)=>{const a=new Date(e.date),s=new Date(t.date);return s-a}));return a.forEach((a=>{const s=new Date(a.date),o=s.toISOString().split("T")[0];t[o]||(t[o]={date:s,matches:[]},e.push(t[o])),t[o].matches.push(a)})),e})),w=async()=>{try{const e=await(0,N.GG)((0,N.rJ)(R,"teams"));a.value=[],e.forEach((e=>{a.value.push({id:e.id,...e.data()})})),console.log(`Loaded ${a.value.length} teams`)}catch(e){console.error("Error loading teams:",e)}},b=async()=>{try{o.value=!0,console.log(`Loading results for ${e.phase} phase`),await w();const a=(0,N.P)((0,N.rJ)(R,"matches"),(0,N._M)("phase","==",e.phase),(0,N._M)("isCompleted","==",!0)),s=await(0,N.GG)(a);t.value=[],console.log(`Found ${s.size} completed matches for phase ${e.phase}`),s.forEach((e=>{const a=e.data(),s=a.date?.toDate?a.date.toDate():new Date(a.date),o=a.completedDate?.toDate?a.completedDate.toDate():a.completedDate?new Date(a.completedDate):s,i={id:e.id,...a,homeTeam:a.homeTeam||a.player1,awayTeam:a.awayTeam||a.player2,homeTeamScore:a.homeTeamScore||0,awayTeamScore:a.awayTeamScore||0,date:s,completedDate:o||s};a.teamMatches&&Array.isArray(a.teamMatches)&&(i.teamMatches=a.teamMatches,console.log(`Match ${e.id} has ${i.teamMatches.length} team matches`)),t.value.push(i)})),n.value=(new Date).toLocaleString(),o.value=!1}catch(a){console.error("Error loading match results:",a),i.value=`Failed to load ${e.phase} match results. Please try again later.`,o.value=!1}},C=t=>{try{console.log("Starting to edit match:",t);const a=t.date instanceof Date?t.date:new Date(t.date);Object.assign(d,{id:"",homeTeam:"",awayTeam:"",homeTeamScore:0,awayTeamScore:0,date:null,dateString:"",time:"",location:"",groupId:"",teamMatches:[]}),d.id=t.id,d.homeTeam=t.homeTeam,d.awayTeam=t.awayTeam,d.homeTeamScore=t.homeTeamScore||0,d.awayTeamScore=t.awayTeamScore||0,d.date=a,d.dateString=a.toISOString().split("T")[0],d.time=t.time||"",d.location=t.location||"",d.groupId=t.groupId||"",d.phase=t.phase||e.phase,t.teamMatches&&Array.isArray(t.teamMatches)&&(console.log("Found team matches to edit:",t.teamMatches),d.teamMatches=JSON.parse(JSON.stringify(t.teamMatches))),console.log("Prepared editingMatch object:",d),m.value=!0}catch(i){console.error("Error preparing match edit:",i),alert("Failed to prepare match data for editing: "+i.message)}},T=async e=>{try{if(console.log("Updating match result with:",e),!e||!e.matchId)return void console.error("Missing match ID");const t=(0,N.H9)(R,"matches",e.matchId),a=e.resultData;if(!a)return void console.error("Missing result data");const s={homeTeamScore:void 0!==a.homeTeamScore?a.homeTeamScore:0,awayTeamScore:void 0!==a.awayTeamScore?a.awayTeamScore:0,isCompleted:!0,completedDate:(0,N.O5)()};if(a.teamMatches&&Array.isArray(a.teamMatches)&&a.teamMatches.length>0){const e=a.teamMatches.map((e=>{const t={};return e.matchId&&(t.matchId=e.matchId),e.type&&(t.type=e.type),e.homePlayer&&(t.homePlayer=e.homePlayer),e.awayPlayer&&(t.awayPlayer=e.awayPlayer),"doubles"===e.type&&(e.homePartner&&(t.homePartner=e.homePartner),e.awayPartner&&(t.awayPartner=e.awayPartner)),e.games&&Array.isArray(e.games)?t.games=e.games.map((e=>({home:void 0!==e.home?e.home:null,away:void 0!==e.away?e.away:null}))):t.games=[],t.homeScore=void 0!==e.homeScore?e.homeScore:0,t.awayScore=void 0!==e.awayScore?e.awayScore:0,t.teamPoints={home:void 0!==e.teamPoints?.home?e.teamPoints.home:0,away:void 0!==e.teamPoints?.away?e.teamPoints.away:0},void 0!==e.orderIndex&&(t.orderIndex=e.orderIndex),t}));s.teamMatches=e}else s.teamMatches=[];console.log("Sanitized update data:",s),await(0,N.mZ)(t,s),console.log("Match updated successfully"),await b(),m.value=!1}catch(i){console.error("Error updating match result:",i),alert("Failed to update match result: "+i.message)}},M=e=>{u.id=e.id,u.homeTeam=e.homeTeam,u.awayTeam=e.awayTeam,u.date=e.date,c.value=!0},P=async()=>{try{const e=(0,N.H9)(R,"matches",u.id);await(0,N.mZ)(e,{isCompleted:!1,completedDate:null,homeTeamScore:null,awayTeamScore:null,teamMatches:null}),await b(),c.value=!1}catch(i){console.error("Error deleting match result:",i),alert("Failed to delete match result. Please try again.")}};return(0,s.wB)((()=>e.phase),(e=>{console.log(`Phase changed to: ${e}`),b()})),(0,s.sV)((()=>{b()})),{matches:t,teamsList:a,filteredMatches:y,groupedMatches:_,loading:o,error:i,lastUpdated:n,formatDate:v,formatDateHeader:h,calculateGameTotals:g,calculatePointTotals:f,showEditModal:l,showDeleteModal:c,showResultModal:m,editingMatch:d,matchToDelete:u,expandedMatches:r,toggleMatchDetails:p,editMatchResult:C,updateMatchResultFromForm:T,confirmDelete:M,deleteMatchResult:P}}},fe=ge,ye=(0,C.A)(fe,ve,he,!1,null,"35d015a1",null),_e=ye.exports,we=function(){var e=this,t=e._self._c;return t("div",{staticClass:"standings-container"},[e.loading?t("div",{staticClass:"loading-container"},[t("div",{staticClass:"loading-spinner"}),t("p",[e._v("Loading standings...")])]):e.error?t("div",{staticClass:"error-container"},[t("i",{staticClass:"error-icon"},[e._v("!")]),t("p",[e._v(e._s(e.error))])]):t("div",{staticClass:"standings-content"},[t("div",{staticClass:"grouped-standings"},["qualification"===e.phase&&0===e.standingsByGroup.length?t("div",{staticClass:"no-teams-message"},[e._v(" No teams found in any qualification groups ")]):"division"===e.phase&&0===e.standingsByDivision.length?t("div",{staticClass:"no-teams-message"},[e._v(" No teams found in any divisions ")]):e._e(),e._l("qualification"===e.phase?e.standingsByGroup:e.standingsByDivision,(function(a){return t("div",{key:a.id,staticClass:"group-standings"},[t("h3",[e._v(e._s(a.name))]),t("div",{staticClass:"standings-table-wrapper"},[t("table",{staticClass:"standings-table"},[e._m(0,!0),t("tbody",e._l(a.teams,(function(a,s){return t("tr",{key:a.id,class:{"top-three":s<3}},[t("td",{staticClass:"position-col"},[t("div",{class:["position",s<3?`position-${s+1}`:""]},[e._v(" "+e._s(s+1)+" ")])]),t("td",{staticClass:"player-col"},[e._v(e._s(a.name))]),t("td",{staticClass:"stat-col"},[e._v(e._s(a.played||0))]),t("td",{staticClass:"stat-col"},[e._v(e._s(a.won||0))]),t("td",{staticClass:"stat-col"},[e._v(e._s(a.lost||0))]),t("td",{staticClass:"stat-col points-col"},[e._v(e._s(a.points||0))])])})),0)])])])}))],2)])])},be=[function(){var e=this,t=e._self._c;return t("thead",[t("tr",[t("th",{staticClass:"position-col"},[e._v("Rank")]),t("th",{staticClass:"player-col"},[e._v("Team")]),t("th",{staticClass:"stat-col"},[e._v("Played")]),t("th",{staticClass:"stat-col"},[e._v("Won")]),t("th",{staticClass:"stat-col"},[e._v("Lost")]),t("th",{staticClass:"stat-col points-col"},[e._v("Points")])])])}],Ce={name:"PublicStandings",props:{phase:{type:String,default:"qualification",validator:e=>["qualification","division"].includes(e)}},setup(e){const t=(0,s.KR)([]),a=(0,s.KR)(!0),o=(0,s.KR)(null),i=(0,s.KR)(null),n=(0,s.KR)([]),r=(0,s.KR)([]),l=async()=>{try{a.value=!0,console.log(`Loading standings for ${e.phase} phase`);const s=await(0,N.GG)((0,N.rJ)(R,"teams")),o=[];s.forEach((e=>{o.push({id:e.id,...e.data()})})),console.log(`Loaded ${o.length} teams total`),"qualification"===e.phase?(t.value=o.filter((e=>e.groupId)),console.log(`Filtered ${t.value.length} teams for qualification phase`)):(t.value=o.filter((e=>e.divisionId)),console.log(`Filtered ${t.value.length} teams for division phase`)),t.value.sort(((e,t)=>(t.points||0)-(e.points||0))),await c(),i.value=(new Date).toLocaleString(),a.value=!1}catch(s){console.error(`Failed to load ${e.phase} standings:`,s),o.value=`Failed to load ${e.phase} standings. Please try again later.`,a.value=!1}},c=async()=>{try{let a;console.log(`Loading ${e.phase} groups/divisions...`),a="qualification"===e.phase?(0,N.P)((0,N.rJ)(R,"groups"),(0,N._M)("phase","in",["qualification",null])):(0,N.P)((0,N.rJ)(R,"groups"),(0,N._M)("phase","==","division"));const s=await(0,N.GG)(a);console.log(`Found ${s.size} groups for ${e.phase} phase`);const o={};if(0===s.size){console.log(`No groups found with phase=${e.phase}`);const t=(0,N.P)((0,N.rJ)(R,"groups"),"qualification"===e.phase?(0,N._M)("type","==","qualification"):(0,N._M)("type","in",["division1","division2","division3","division4"])),a=await(0,N.GG)(t);console.log(`Fallback query found ${a.size} groups`),a.forEach((e=>{const t=e.data();o[e.id]={id:e.id,name:t.name||`Group ${e.id}`,order:t.order||0,teams:[]}}))}else s.forEach((e=>{const t=e.data();o[e.id]={id:e.id,name:t.name||`Group ${e.id}`,order:t.order||0,teams:[]}}));t.value.forEach((t=>{const a="qualification"===e.phase?t.groupId:t.divisionId;a&&o[a]?o[a].teams.push(t):console.log(`Team ${t.name} (${t.id}) has groupId=${a} but no matching group found`)})),Object.values(o).forEach((e=>{e.teams.sort(((e,t)=>(t.points||0)-(e.points||0)))}));const i=Object.values(o).sort(((e,t)=>(e.order||0)-(t.order||0)));"qualification"===e.phase?(r.value=i,console.log(`Set ${i.length} qualification groups with teams:`,i.map((e=>`${e.name}: ${e.teams.length} teams`)).join(", "))):(n.value=i,console.log(`Set ${i.length} division groups with teams:`,i.map((e=>`${e.name}: ${e.teams.length} teams`)).join(", ")))}catch(o){console.error("Error loading grouped standings:",o)}};return(0,s.wB)((()=>e.phase),(e=>{console.log(`Phase changed to: ${e}`),l()})),(0,s.sV)((()=>{l()})),{players:t,loading:a,error:o,lastUpdated:i,standingsByDivision:n,standingsByGroup:r}}},Te=Ce,Me=(0,C.A)(Te,we,be,!1,null,"7fbbc7e7",null),Pe=Me.exports,Se=function(){var e=this,t=e._self._c;return e.isLoggedIn?t("div",{staticClass:"admin-controls"},[t("div",{staticClass:"admin-header"},[t("button",{staticClass:"btn logout-btn",on:{click:e.logout}},[e._v("Logout")])]),t("div",{staticClass:"admin-tabs"},[t("button",{class:["tab-btn",{active:"tournament"===e.activeTab}],on:{click:function(t){e.activeTab="tournament"}}},[e._v(" Tournament Settings ")])]),"tournament"===e.activeTab?t("div",{staticClass:"tab-content"},[t("h4",[e._v("Tournament Phase Settings")]),t("div",{staticClass:"settings-section"},[t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"tournament-phase"}},[e._v("Current Tournament Phase:")]),t("select",{directives:[{name:"model",rawName:"v-model",value:e.tournamentPhase,expression:"tournamentPhase"}],attrs:{id:"tournament-phase"},on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.tournamentPhase=t.target.multiple?a:a[0]},e.updateTournamentPhase]}},[t("option",{attrs:{value:"registration"}},[e._v("Registration")]),t("option",{attrs:{value:"seeding"}},[e._v("Seeding")]),t("option",{attrs:{value:"qualification"}},[e._v("Qualification Matches")]),t("option",{attrs:{value:"division_assignment"}},[e._v("Division Assignment")]),t("option",{attrs:{value:"division"}},[e._v("Division Matches")])])]),t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"max-tables"}},[e._v("Maximum Available Tables:")]),t("input",{directives:[{name:"model",rawName:"v-model.number",value:e.maxTables,expression:"maxTables",modifiers:{number:!0}}],attrs:{type:"number",id:"max-tables",min:"2",step:"2"},domProps:{value:e.maxTables},on:{change:e.updateMaxTables,input:function(t){t.target.composing||(e.maxTables=e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}}),t("small",{staticClass:"help-text"},[e._v("This will limit matches to "+e._s(Math.floor(e.maxTables/2))+" per timeslot (2 tables per match).")])]),t("p",{staticClass:"phase-description"},[t("strong",[e._v("Current phase:")]),t("span",{staticClass:"phase-badge"},[e._v(e._s(e.tournamentPhase))])])])]):e._e(),"registration"===e.activeTab?t("div",{staticClass:"tab-content"},[t("h4",[e._v("Registration Settings")]),t("div",{staticClass:"settings-section"},[t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"registration-status"}},[e._v("Registration Status:")]),t("select",{directives:[{name:"model",rawName:"v-model",value:e.registrationSettings.isOpen,expression:"registrationSettings.isOpen"}],attrs:{id:"registration-status"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.registrationSettings,"isOpen",t.target.multiple?a:a[0])}}},[t("option",{domProps:{value:!0}},[e._v("Open")]),t("option",{domProps:{value:!1}},[e._v("Closed")])])]),t("div",{directives:[{name:"show",rawName:"v-show",value:e.registrationSettings.isOpen,expression:"registrationSettings.isOpen"}],staticClass:"form-group"},[t("label",{attrs:{for:"registration-season"}},[e._v("Current Season:")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.registrationSettings.seasonName,expression:"registrationSettings.seasonName"}],attrs:{type:"text",id:"registration-season",placeholder:"e.g. Fall 2025"},domProps:{value:e.registrationSettings.seasonName},on:{input:function(t){t.target.composing||e.$set(e.registrationSettings,"seasonName",t.target.value)}}})]),t("div",{directives:[{name:"show",rawName:"v-show",value:e.registrationSettings.isOpen,expression:"registrationSettings.isOpen"}],staticClass:"form-group"},[t("label",{attrs:{for:"registration-deadline"}},[e._v("Registration Deadline:")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.registrationSettings.deadline,expression:"registrationSettings.deadline"}],attrs:{type:"date",id:"registration-deadline"},domProps:{value:e.registrationSettings.deadline},on:{input:function(t){t.target.composing||e.$set(e.registrationSettings,"deadline",t.target.value)}}})]),t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"registration-contact"}},[e._v("Contact Email:")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.registrationSettings.contactEmail,expression:"registrationSettings.contactEmail"}],attrs:{type:"email",id:"registration-contact",placeholder:"e.g. bedrift@trondheimbtk.no"},domProps:{value:e.registrationSettings.contactEmail},on:{input:function(t){t.target.composing||e.$set(e.registrationSettings,"contactEmail",t.target.value)}}})]),t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"registration-contact-person"}},[e._v("Contact Person:")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.registrationSettings.contactPerson,expression:"registrationSettings.contactPerson"}],attrs:{type:"text",id:"registration-contact-person",placeholder:"e.g. Trond Amundsen"},domProps:{value:e.registrationSettings.contactPerson},on:{input:function(t){t.target.composing||e.$set(e.registrationSettings,"contactPerson",t.target.value)}}})]),t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"registration-contact-phone"}},[e._v("Contact Phone:")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.registrationSettings.contactPhone,expression:"registrationSettings.contactPhone"}],attrs:{type:"tel",id:"registration-contact-phone",placeholder:"e.g. 918 97 293"},domProps:{value:e.registrationSettings.contactPhone},on:{input:function(t){t.target.composing||e.$set(e.registrationSettings,"contactPhone",t.target.value)}}})]),t("div",{staticClass:"preview-block"},[t("h5",[e._v("Preview of Registration Message:")]),e.registrationSettings.isOpen?t("div",{staticClass:"registration-message"},[e._v(" Registration is open for "),t("strong",[e._v(e._s(e.registrationSettings.seasonName))]),e._v(". Deadline is "),t("strong",[e._v(e._s(e.formatDeadlineDate(e.registrationSettings.deadline)))]),e._v(". ")]):t("div",{staticClass:"registration-message"},[e._v(" Registration is now closed. To get more info about the next season contact "),t("a",{attrs:{href:`mailto:${e.registrationSettings.contactEmail||"bedrift@trondheimbtk.no"}`}},[e._v(" "+e._s(e.registrationSettings.contactEmail||"bedrift@trondheimbtk.no")+" ")])])]),t("button",{staticClass:"btn save-btn",on:{click:e.saveRegistrationSettings}},[e._v(" Save Registration Settings ")])])]):e._e()]):t("div",{staticClass:"auth-section"},[t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"email"}},[e._v("Email:")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],attrs:{type:"email",id:"email",placeholder:"Enter your email"},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}})]),t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"password"}},[e._v("Password:")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{type:"password",id:"password",placeholder:"Enter your password"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}})]),t("button",{staticClass:"btn login-btn",on:{click:e.login}},[e._v("Login")]),e.authError?t("p",{staticClass:"error-message"},[e._v(e._s(e.authError))]):e._e()])},De=[],Ae={name:"AdminPanel",emits:["login","logout","phase-updated"],setup(e,{emit:t}){const a=(0,s.KR)(!1),o=(0,s.KR)(""),i=(0,s.KR)(""),n=(0,s.KR)(""),r=(0,s.KR)("tournament"),l=(0,s.KR)("registration"),c=(0,s.KR)(16),m=(0,s.Kh)({isOpen:!0,seasonName:"",deadline:"",contactEmail:"bedrift@trondheimbtk.no",contactPerson:"Trond Amundsen",contactPhone:"918 97 293"});(0,s.sV)((()=>{const e=(0,k.hg)(q,(e=>{a.value=!!e,a.value?(v(),d(),t("login")):t("logout")}));return()=>e()}));const d=async()=>{try{const e=await(0,N.x7)((0,N.H9)(R,"settings","tournament"));if(e.exists()){const t=e.data();l.value=t.phase||"registration",c.value=t.maxTables||16}}catch(e){console.error("Error loading tournament phase:",e)}},u=async()=>{try{await(0,N.BN)((0,N.H9)(R,"settings","tournament"),{phase:l.value,updatedAt:(0,N.O5)()},{merge:!0}),t("phase-updated"),alert("Tournament phase updated successfully!")}catch(e){console.error("Error updating tournament phase:",e),alert("Error updating tournament phase")}},p=async()=>{try{c.value<2&&(c.value=2),c.value%2!==0&&(c.value+=1),await(0,N.BN)((0,N.H9)(R,"settings","tournament"),{maxTables:c.value,updatedAt:(0,N.O5)()},{merge:!0})}catch(e){console.error("Error updating max tables:",e),alert("Error updating maximum tables")}},v=async()=>{try{const e=await(0,N.x7)((0,N.H9)(R,"settings","registration"));if(e.exists()){const t=e.data();m.isOpen=t.isOpen,m.seasonName=t.seasonName,m.deadline=t.deadline,m.contactEmail=t.contactEmail||"bedrift@trondheimbtk.no",m.contactPerson=t.contactPerson||"Trond Amundsen",m.contactPhone=t.contactPhone||"918 97 293"}else{const e={isOpen:!0,seasonName:"Fall "+(new Date).getFullYear(),deadline:(new Date).toISOString().split("T")[0],contactEmail:"bedrift@trondheimbtk.no",contactPerson:"Trond Amundsen",contactPhone:"918 97 293",createdAt:(0,N.O5)()};await(0,N.BN)((0,N.H9)(R,"settings","registration"),e),m.isOpen=e.isOpen,m.seasonName=e.seasonName,m.deadline=e.deadline,m.contactEmail=e.contactEmail,m.contactPerson=e.contactPerson,m.contactPhone=e.contactPhone}}catch(e){console.error("Error loading registration settings:",e)}},h=async()=>{try{await(0,N.BN)((0,N.H9)(R,"settings","registration"),{isOpen:m.isOpen,seasonName:m.seasonName,deadline:m.deadline,contactEmail:m.contactEmail,contactPerson:m.contactPerson,contactPhone:m.contactPhone,updatedAt:(0,N.O5)()},{merge:!0})}catch(e){console.error("Error saving registration settings:",e),alert("Error saving registration settings")}},g=e=>{if(!e)return"";try{const t=new Date(e);return isNaN(t.getTime())?e:t.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"})}catch(t){return console.error("Error formatting date:",t),e}},f=async()=>{try{n.value="",await(0,k.x9)(q,o.value,i.value),a.value=!0,v(),d(),t("login")}catch(e){n.value=e.message,console.error("Login error:",e)}},y=async()=>{try{await(0,k.CI)(q),a.value=!1,t("logout")}catch(e){console.error("Logout error:",e)}};return{isLoggedIn:a,email:o,password:i,authError:n,activeTab:r,registrationSettings:m,tournamentPhase:l,maxTables:c,login:f,logout:y,formatDeadlineDate:g,saveRegistrationSettings:h,updateTournamentPhase:u,updateMaxTables:p}}},Ie=Ae,Ne=(0,C.A)(Ie,Se,De,!1,null,"55bf7274",null),xe=Ne.exports,ke={name:"TableTennisView",components:{TeamManagement:W,TeamSeeding:V,GroupManagement:te,UpcomingMatches:pe,MatchResults:_e,PublicStandings:Pe,AdminPanel:xe},setup(){const e=(0,s.KR)("qualification_matches"),t=(0,s.KR)(!1),a=(0,s.KR)("qualification"),o=(0,s.KR)(!1),i=(0,s.KR)({isOpen:!0,seasonName:"Current Season",deadline:(new Date).toISOString().split("T")[0],contactEmail:"bedrift@trondheimbtk.no",contactPerson:"Trond Amundsen",contactPhone:"918 97 293"}),n={registration:1,seeding:2,qualification:3,division_assignment:4,division:5},r=[{id:"teams",name:"Teams",minPhase:"seeding",maxPhase:"division",category:"general",adminOnly:!1},{id:"seeding",name:"Seeding",minPhase:"seeding",maxPhase:"qualification",category:"general",adminOnly:!0},{id:"qualification_groups",name:"Groups",minPhase:"qualification",maxPhase:"division",category:"qualification",adminOnly:!0},{id:"qualification_matches",name:"Matches",minPhase:"qualification",maxPhase:"division",category:"qualification",adminOnly:!1},{id:"qualification_results",name:"Results",minPhase:"qualification",maxPhase:"division",category:"qualification",adminOnly:!1},{id:"qualification_standings",name:"Standings",minPhase:"qualification",maxPhase:"division",category:"qualification",adminOnly:!1},{id:"division_groups",name:"Divisions",minPhase:"division_assignment",maxPhase:"division",category:"division",adminOnly:!0},{id:"division_matches",name:"Matches",minPhase:"division",maxPhase:"division",category:"division",adminOnly:!1},{id:"division_results",name:"Results",minPhase:"division",maxPhase:"division",category:"division",adminOnly:!1},{id:"division_standings",name:"Standings",minPhase:"division",maxPhase:"division",category:"division",adminOnly:!1},{id:"admin",name:"Admin",minPhase:"registration",maxPhase:"division",category:"admin",adminOnly:!0}],l=e=>{if(e.adminOnly&&!t.value)return!1;const s=n[a.value]||0,o=n[e.minPhase]||0,i=n[e.maxPhase]||100;return s>=o&&s<=i||t.value},c=(0,s.EW)((()=>r.filter((e=>"general"===e.category)))),m=(0,s.EW)((()=>r.filter((e=>"qualification"===e.category)))),d=(0,s.EW)((()=>r.filter((e=>"division"===e.category)))),u=(0,s.EW)((()=>r.filter((e=>"admin"===e.category)))),p=(0,s.EW)((()=>r.filter((e=>l(e))))),v=(0,s.EW)((()=>m.value.some((e=>l(e))))),h=(0,s.EW)((()=>d.value.some((e=>l(e))))),g=async()=>{try{const t=await(0,N.x7)((0,N.H9)(R,"settings","tournament"));if(t.exists()){const s=t.data().phase||"registration";a.value=s,l(r.find((t=>t.id===e.value)))||(e.value="qualification"===s?"qualification_matches":"division"===s||"division_assignment"===s?"division_matches":"qualification_matches")}}catch(t){console.error("Error loading tournament phase:",t)}},f=async()=>{try{const e=await(0,N.x7)((0,N.H9)(R,"settings","registration"));e.exists()&&(i.value={...i.value,...e.data()})}catch(e){console.error("Error loading registration settings:",e)}},y=e=>{if(!e)return"";try{const t=new Date(e);return isNaN(t.getTime())?e:t.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"})}catch(t){return console.error("Error formatting date:",t),e}};(0,s.sV)((()=>{g(),f()}));const _=t=>{a.value=t,"qualification"===t?e.value="qualification_matches":"division"===t&&(e.value="division_matches")},w=t=>{e.value=t,o.value=!1};return{activeTab:e,tabs:r,getVisibleTabs:p,isAdmin:t,tournamentPhase:a,registrationSettings:i,formatDate:y,generalTabs:c,qualificationTabs:m,divisionTabs:d,adminTabs:u,isTabVisible:l,hasQualificationTabs:v,hasDivisionTabs:h,loadTournamentPhase:g,isMobileMenuOpen:o,setPhaseAndTab:_,setTabAndCloseMobileMenu:w}}},$e=ke,Ge=(0,C.A)($e,A,I,!1,null,"0f84d457",null),Ee=Ge.exports;s.Ay.use(D.Ay);const Re=[{path:"/",name:"TableTennis",component:Ee}],qe=new D.Ay({mode:"history",base:"/",routes:Re});qe.afterEach((e=>{const t=_.appInfo?.name||"TBTK";e.meta.title?document.title=`${e.meta.title}`:document.title=t}));var Oe=qe;s.Ay.config.productionTip=!1,new s.Ay({vuetify:S,router:Oe,render:e=>e(M)}).$mount("#app")}},t={};function a(s){var o=t[s];if(void 0!==o)return o.exports;var i=t[s]={exports:{}};return e[s](i,i.exports,a),i.exports}a.m=e,function(){var e=[];a.O=function(t,s,o,i){if(!s){var n=1/0;for(m=0;m<e.length;m++){s=e[m][0],o=e[m][1],i=e[m][2];for(var r=!0,l=0;l<s.length;l++)(!1&i||n>=i)&&Object.keys(a.O).every((function(e){return a.O[e](s[l])}))?s.splice(l--,1):(r=!1,i<n&&(n=i));if(r){e.splice(m--,1);var c=o();void 0!==c&&(t=c)}}return t}i=i||0;for(var m=e.length;m>0&&e[m-1][2]>i;m--)e[m]=e[m-1];e[m]=[s,o,i]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var s in t)a.o(t,s)&&!a.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};a.O.j=function(t){return 0===e[t]};var t=function(t,s){var o,i,n=s[0],r=s[1],l=s[2],c=0;if(n.some((function(t){return 0!==e[t]}))){for(o in r)a.o(r,o)&&(a.m[o]=r[o]);if(l)var m=l(a)}for(t&&t(s);c<n.length;c++)i=n[c],a.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return a.O(m)},s=self["webpackChunktbtbedrift_github_io"]=self["webpackChunktbtbedrift_github_io"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=a.O(void 0,[504],(function(){return a(483)}));s=a.O(s)})();
//# sourceMappingURL=app.ed6fcd48.js.map